"use strict";(self.webpackChunkbookingApp=self.webpackChunkbookingApp||[]).push([[335,860,992],{335:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('{/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ useSession)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(318);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction useSession() {\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => {\n        try {\n            return JSON.parse(localStorage.getItem("authUser") || "null");\n        }\n        catch {\n            return null;\n        }\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n        const onLogin = (e) => setUser(e.detail);\n        const onLogout = () => setUser(null);\n        window.addEventListener("auth:login", onLogin);\n        window.addEventListener("auth:logout", onLogout);\n        return () => {\n            window.removeEventListener("auth:login", onLogin);\n            window.removeEventListener("auth:logout", onLogout);\n        };\n    }, []);\n    return user;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzM1LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzdCO0FBQ2YsNEJBQTRCLCtDQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm9va2luZ0FwcC8uL3NyYy9ib29raW5nL3VzZVNlc3Npb24udHM/ZWQzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VTZXNzaW9uKCkge1xuICAgIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlKCgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYXV0aFVzZXJcIikgfHwgXCJudWxsXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3Qgb25Mb2dpbiA9IChlKSA9PiBzZXRVc2VyKGUuZGV0YWlsKTtcbiAgICAgICAgY29uc3Qgb25Mb2dvdXQgPSAoKSA9PiBzZXRVc2VyKG51bGwpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImF1dGg6bG9naW5cIiwgb25Mb2dpbik7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYXV0aDpsb2dvdXRcIiwgb25Mb2dvdXQpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhdXRoOmxvZ2luXCIsIG9uTG9naW4pO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhdXRoOmxvZ291dFwiLCBvbkxvZ291dCk7XG4gICAgICAgIH07XG4gICAgfSwgW10pO1xuICAgIHJldHVybiB1c2VyO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///335\n\n}')},338:(__unused_webpack_module,exports,__webpack_require__)=>{eval("{var __webpack_unused_export__;\n\n\nvar m = __webpack_require__(676);\nif (true) {\n  exports.H = m.createRoot;\n  __webpack_unused_export__ = m.hydrateRoot;\n} else // removed by dead control flow\n{ var i; }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzM4LmpzIiwibWFwcGluZ3MiOiI7QUFBYTs7QUFFYixRQUFRLG1CQUFPLENBQUMsR0FBVztBQUMzQixJQUFJLElBQXFDO0FBQ3pDLEVBQUUsU0FBa0I7QUFDcEIsRUFBRSx5QkFBbUI7QUFDckIsRUFBRSxLQUFLO0FBQUEsVUFrQk4iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib29raW5nQXBwLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWRvbS9jbGllbnQuanM/MTFiMSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBtID0gcmVxdWlyZSgncmVhY3QtZG9tJyk7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICBleHBvcnRzLmNyZWF0ZVJvb3QgPSBtLmNyZWF0ZVJvb3Q7XG4gIGV4cG9ydHMuaHlkcmF0ZVJvb3QgPSBtLmh5ZHJhdGVSb290O1xufSBlbHNlIHtcbiAgdmFyIGkgPSBtLl9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEO1xuICBleHBvcnRzLmNyZWF0ZVJvb3QgPSBmdW5jdGlvbihjLCBvKSB7XG4gICAgaS51c2luZ0NsaWVudEVudHJ5UG9pbnQgPSB0cnVlO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gbS5jcmVhdGVSb290KGMsIG8pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpLnVzaW5nQ2xpZW50RW50cnlQb2ludCA9IGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgZXhwb3J0cy5oeWRyYXRlUm9vdCA9IGZ1bmN0aW9uKGMsIGgsIG8pIHtcbiAgICBpLnVzaW5nQ2xpZW50RW50cnlQb2ludCA9IHRydWU7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBtLmh5ZHJhdGVSb290KGMsIGgsIG8pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpLnVzaW5nQ2xpZW50RW50cnlQb2ludCA9IGZhbHNlO1xuICAgIH1cbiAgfTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///338\n\n}")},541:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('{/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(848);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(318);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(676);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _useSession__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(335);\n/* harmony import */ var _store_bookingsSlice__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(860);\n/* harmony import */ var _store_hooks__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(498);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(868);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\nconst PAGE_SIZE = 5;\nconst statusClass = {\n    Approved: "bg-emerald-500/15 text-emerald-200 ring-1 ring-emerald-400/20",\n    Pending: "bg-amber-500/15 text-amber-200 ring-1 ring-amber-400/20",\n    Cancelled: "bg-rose-500/15 text-rose-200 ring-1 ring-rose-400/20",\n    default: "bg-white/10 text-white/80 ring-1 ring-white/10",\n};\n// icons\nconst Check = () => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", { viewBox: "0 0 20 20", className: "h-4 w-4", fill: "currentColor", "aria-hidden": "true", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", { d: "M7.5 13.5 4.5 10.5 3 12l4.5 4.5L17 7l-1.5-1.5z" }) }));\nconst Chevron = () => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", { viewBox: "0 0 20 20", className: "h-4 w-4 opacity-80", fill: "currentColor", "aria-hidden": "true", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", { d: "M5.8 7.5 10 11.7l4.2-4.2 1.3 1.3-5.5 5.5-5.5-5.5z" }) }));\n/** ---------- Portal helpers ---------- */\nfunction useIsomorphicLayoutEffect(fn, deps) {\n    const useLE = typeof window !== "undefined" ? (react__WEBPACK_IMPORTED_MODULE_1___default().useLayoutEffect) : (react__WEBPACK_IMPORTED_MODULE_1___default().useEffect);\n    useLE(fn, deps);\n}\nfunction MenuPortal({ children }) {\n    if (typeof document === "undefined")\n        return null;\n    return (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(children, document.body);\n}\n/** ---------- Status dropdown with portal ---------- */\nconst StatusMenu = ({ value, onChange, disabled }) => {\n    const [open, setOpen] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(false);\n    const [activeIdx, setActiveIdx] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(0);\n    const btnRef = react__WEBPACK_IMPORTED_MODULE_1___default().useRef(null);\n    const options = ["Pending", "Approved", "Cancelled"];\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        setActiveIdx(Math.max(0, options.findIndex((o) => o === value)));\n    }, [value]);\n    // keyboard interactions\n    function handleKey(e) {\n        if (!open) {\n            if (e.key === "Enter" || e.key === " ") {\n                e.preventDefault();\n                setOpen(true);\n            }\n            return;\n        }\n        if (e.key === "Escape") {\n            setOpen(false);\n            btnRef.current?.focus();\n        }\n        if (e.key === "ArrowDown") {\n            e.preventDefault();\n            setActiveIdx((i) => Math.min(options.length - 1, i + 1));\n        }\n        if (e.key === "ArrowUp") {\n            e.preventDefault();\n            setActiveIdx((i) => Math.max(0, i - 1));\n        }\n        if (e.key === "Enter") {\n            e.preventDefault();\n            const sel = options[activeIdx];\n            if (sel && sel !== value)\n                onChange(sel);\n            setOpen(false);\n            btnRef.current?.focus();\n        }\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "relative inline-block text-left", onKeyDown: handleKey, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button", { ref: btnRef, type: "button", disabled: disabled, onClick: () => setOpen((o) => !o), className: "inline-flex items-center gap-2 rounded-lg px-2.5 py-1.5 text-xs font-semibold\\r\\n                   border border-white/15 bg-white/5 hover:bg-white/10 text-white/90 transition\\r\\n                   disabled:opacity-50 disabled:cursor-not-allowed", "aria-haspopup": "menu", "aria-expanded": open, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { className: `inline-flex items-center gap-2 rounded-md px-2 py-0.5 ring-1 text-xs font-medium\r\n                      ${statusClass[value] ?? statusClass.default}`, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "h-1.5 w-1.5 rounded-full bg-current/80" }), value] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Chevron, {})] }), open && btnRef.current && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(AnchoredMenu, { anchor: btnRef.current, value: value, options: options, activeIdx: activeIdx, setActiveIdx: setActiveIdx, onSelect: (opt) => {\n                    if (opt !== value)\n                        onChange(opt);\n                    setOpen(false);\n                }, onClose: () => setOpen(false) }))] }));\n};\nfunction AnchoredMenu({ anchor, value, options, activeIdx, setActiveIdx, onSelect, onClose, }) {\n    const menuRef = react__WEBPACK_IMPORTED_MODULE_1___default().useRef(null);\n    const [pos, setPos] = react__WEBPACK_IMPORTED_MODULE_1___default().useState({\n        top: 0,\n        left: 0,\n        width: 176,\n        openUp: false,\n    });\n    // place near anchor (right-aligned), flip if needed\n    const place = react__WEBPACK_IMPORTED_MODULE_1___default().useCallback(() => {\n        const r = anchor.getBoundingClientRect();\n        const width = 176; // w-44\n        const margin = 8;\n        // initial: open downward\n        let top = r.bottom + margin;\n        let left = r.right - width;\n        // clamp left within viewport\n        left = Math.max(8, Math.min(left, window.innerWidth - width - 8));\n        // if not enough space below, flip upward (after measuring menu height)\n        let openUp = false;\n        const menuH = menuRef.current?.offsetHeight ?? 0;\n        if (window.innerHeight - r.bottom < (menuH || 160) + margin) {\n            openUp = true;\n            top = r.top - margin - (menuH || 160);\n        }\n        setPos({ top, left, width, openUp });\n    }, [anchor]);\n    useIsomorphicLayoutEffect(() => {\n        place();\n    }, [place]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        const onDocClick = (e) => {\n            const t = e.target;\n            if (menuRef.current?.contains(t) || anchor.contains(t))\n                return;\n            onClose();\n        };\n        const onKey = (e) => e.key === "Escape" && onClose();\n        const onScroll = () => place();\n        const onResize = () => place();\n        document.addEventListener("mousedown", onDocClick);\n        document.addEventListener("keydown", onKey);\n        window.addEventListener("scroll", onScroll, true);\n        window.addEventListener("resize", onResize);\n        return () => {\n            document.removeEventListener("mousedown", onDocClick);\n            document.removeEventListener("keydown", onKey);\n            window.removeEventListener("scroll", onScroll, true);\n            window.removeEventListener("resize", onResize);\n        };\n    }, [anchor, onClose, place]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(MenuPortal, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: menuRef, className: "fixed z-50 overflow-hidden rounded-lg border border-white/10 bg-emerald-950/95 shadow-2xl backdrop-blur", style: { top: pos.top, left: pos.left, width: pos.width }, onClick: (e) => e.stopPropagation(), children: options.map((opt, idx) => {\n                const isActive = idx === activeIdx;\n                const isSelected = opt === value;\n                return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button", { role: "menuitem", className: `flex w-full items-center justify-between gap-2 px-3 py-2 text-xs text-white/90 ${isActive ? "bg-white/10" : "hover:bg-white/10"}`, onMouseEnter: () => setActiveIdx(idx), onClick: () => onSelect(opt), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: opt }), isSelected && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-emerald-300", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Check, {}) }))] }, opt));\n            }) }) }));\n}\n/** ---------- Booking list ---------- */\nconst BookingList = () => {\n    const sessionUser = (0,_useSession__WEBPACK_IMPORTED_MODULE_3__["default"])();\n    const dispatch = (0,_store_hooks__WEBPACK_IMPORTED_MODULE_5__/* .useAppDispatch */ .j)();\n    const all = (0,react_redux__WEBPACK_IMPORTED_MODULE_6__.useSelector)((s) => s.bookings?.all ?? []);\n    // Selector that adapts to current user visibility\n    const selectVisible = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => (0,_store_bookingsSlice__WEBPACK_IMPORTED_MODULE_4__.makeSelectVisibleBookings)(sessionUser ?? undefined), [sessionUser]);\n    // const rows = useAppSelector(selectVisible);\n    const user = (0,_useSession__WEBPACK_IMPORTED_MODULE_3__["default"])();\n    const userBookings = (0,react_redux__WEBPACK_IMPORTED_MODULE_6__.useSelector)((s) => s.bookings?.all ?? []);\n    const rows = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n        if (!user?.email)\n            return [];\n        // ðŸ‘‡ Admin can see all bookings\n        if (user.email === "admin@example.com") {\n            return userBookings;\n        }\n        // ðŸ‘‡ Regular users only see their own\n        return userBookings.filter((b) => b.user?.email === user.email);\n    }, [userBookings, user]);\n    console.log({ rows });\n    const changeStatus = (id, status) => dispatch((0,_store_bookingsSlice__WEBPACK_IMPORTED_MODULE_4__.updateBookingStatus)({ id, status }));\n    // Guard for non-admins\n    const visible = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n        if (!user)\n            return [];\n        // treat either role or hardcoded email as admin\n        const isAdmin = user.role === "Admin" || user.email === "admin@example.com";\n        if (isAdmin)\n            return userBookings;\n        const myEmail = (user.email ?? "").toLowerCase();\n        return userBookings.filter((b) => (b.user?.email ?? "").toLowerCase() === myEmail);\n    }, [userBookings, user]);\n    // Pagination\n    const [page, setPage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1);\n    const total = visible.length;\n    const totalPages = Math.max(1, Math.ceil(total / PAGE_SIZE));\n    const startIdx = (page - 1) * PAGE_SIZE;\n    const endIdx = Math.min(startIdx + PAGE_SIZE, total);\n    const pageData = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => visible.slice(startIdx, endIdx), [visible, startIdx, endIdx]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => { if (page > totalPages)\n        setPage(1); }, [totalPages, page]);\n    const cancel = (id) => dispatch((0,_store_bookingsSlice__WEBPACK_IMPORTED_MODULE_4__.cancelBooking)(id));\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "w-full rounded-2xl py-4  ", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "mb-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2", { className: "text-lg sm:text-xl font-semibold text-white", children: "Your Bookings" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-xs sm:text-sm text-white/70", children: total === 0 ? "0 total" : `${startIdx + 1}-${endIdx} of ${total}` })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "overflow-hidden rounded-xl border border-white/10", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "sm:hidden divide-y divide-white/10", children: pageData.length > 0 ? (pageData.map((b) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "p-4 bg-black/10", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-start justify-between gap-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "min-w-0", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "text-base font-medium text-white", children: b.facility }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "mt-1 text-xs text-white/80", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "inline-block mr-3", children: b.date }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "inline-block", children: b.slot })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "mt-2 flex items-center gap-2 text-sm", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { className: `inline-flex items-center gap-2 rounded-lg px-2 py-0.5 text-xs font-medium\r\n                                ${statusClass[b.status] ?? statusClass.default}`, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "h-1.5 w-1.5 rounded-full bg-current/80" }), b.status] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-white/70", children: "\\u2022" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { className: "inline-flex items-center gap-2 text-white/90", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "grid h-6 w-6 place-items-center rounded-full bg-white/10 text-[10px] text-white/80", children: (b.user?.name ?? "â€”").slice(0, 1).toUpperCase() }), b.user?.name ?? "â€”"] })] })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex shrink-0 gap-2", children: [sessionUser?.role !== "Admin" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { onClick: () => cancel(b.id), disabled: b.status === "Cancelled", className: "rounded-md px-3 py-1.5 text-xs font-semibold text-white\\r\\n                               bg-rose-600/90 hover:bg-rose-600 disabled:opacity-50 disabled:cursor-not-allowed", children: "Cancel" })), sessionUser?.role === "Admin" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StatusMenu, { value: b.status, onChange: (next) => changeStatus(b.id, next), disabled: b.status === "Cancelled" }))] })] }) }, b.id)))) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "py-10 px-4 text-center text-white/70", children: "No bookings yet." })) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "hidden sm:block", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "overflow-x-auto", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("table", { className: "min-w-full text-sm", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("thead", { className: "sticky top-0 z-10 bg-emerald-900/60 backdrop-blur text-left text-white/80", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("tr", { className: "[&>th]:py-3 [&>th]:px-4", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th", { className: "w-[22%]", children: "Facility" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th", { className: "w-[16%]", children: "Date" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th", { className: "w-[16%]", children: "Slot" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th", { className: "w-[16%]", children: "Status" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th", { className: "w-[18%]", children: "Booked By" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th", { className: "w-[12%] text-right", children: "Actions" })] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("tbody", { className: "divide-y divide-white/10", children: [pageData.map((b) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("tr", { className: "align-top transition hover:bg-white/5 even:bg-white/5/30", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { className: "py-3 px-4 text-white", children: b.facility }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { className: "py-3 px-4 text-white/90", children: b.date }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { className: "py-3 px-4 text-white/90", children: b.slot }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { className: "py-3 px-4", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { className: `inline-flex items-center gap-2 rounded-lg px-2.5 py-1 text-xs font-medium\r\n                                ${statusClass[b.status] ?? statusClass.default}`, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "h-1.5 w-1.5 rounded-full bg-current/80" }), b.status] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { className: "py-3 px-4 text-white/90", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center gap-2", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "grid h-7 w-7 place-items-center rounded-full bg-white/10 text-xs text-white/80", children: (b.user?.name ?? "â€”").slice(0, 1).toUpperCase() }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: b.user?.name ?? "â€”" })] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { className: "py-3 px-4", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex justify-end gap-2", children: [sessionUser?.role !== "Admin" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { onClick: () => cancel(b.id), disabled: b.status === "Cancelled", className: "rounded-lg px-3 py-1.5 text-xs font-semibold text-white\\r\\n                                   bg-rose-600/90 hover:bg-rose-600 disabled:opacity-50 disabled:cursor-not-allowed", children: "Cancel" })), sessionUser?.role === "Admin" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StatusMenu, { value: b.status, onChange: (next) => changeStatus(b.id, next), disabled: b.status === "Cancelled" }))] }) })] }, b.id))), total === 0 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tr", { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { colSpan: 6, className: "py-10 px-4 text-center text-white/70", children: "No bookings yet." }) }))] })] }) }) }), total > PAGE_SIZE && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between border-t border-white/10 bg-emerald-950/40 px-3 sm:px-4 py-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "hidden sm:block text-xs text-white/60", children: ["Showing ", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-white/90", children: startIdx + 1 }), "\\u2013", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-white/90", children: endIdx }), " of", " ", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-white/90", children: total })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center justify-end gap-1.5", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { onClick: () => setPage((p) => Math.max(1, p - 1)), disabled: page === 1, className: "rounded-lg border border-white/15 bg-white/5 px-3 py-1.5 text-xs text-white/90 hover:bg-white/10 disabled:opacity-40", "aria-label": "Previous page", children: "\\u2039 Prev" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "hidden xs:flex items-center gap-1", children: Array.from({ length: totalPages }, (_, i) => i + 1)\n                                            .slice(Math.max(0, Math.min(page - 3, totalPages - 5)), Math.max(5, Math.min(totalPages, page + 2)))\n                                            .map((p) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { onClick: () => setPage(p), className: `h-8 w-8 rounded-md text-xs font-medium ${p === page\n                                                ? "bg-emerald-500 text-emerald-950"\n                                                : "border border-white/15 bg-white/5 text-white/90 hover:bg-white/10"}`, "aria-current": p === page ? "page" : undefined, children: p }, p))) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "xs:hidden text-xs text-white/80", children: ["Page ", page, " / ", totalPages] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { onClick: () => setPage((p) => Math.min(totalPages, p + 1)), disabled: page === totalPages, className: "rounded-lg border border-white/15 bg-white/5 px-3 py-1.5 text-xs text-white/90 hover:bg-white/10 disabled:opacity-40", "aria-label": "Next page", children: "Next \\u203A" })] })] }))] })] }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BookingList);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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REFBSSxTQUFTLHdEQUF3RCxHQUFHLHNEQUFJLFNBQVMsd0RBQXdELEdBQUcsc0RBQUksU0FBUyxrQ0FBa0MsdURBQUssV0FBVztBQUM1MEUsa0NBQWtDLDZDQUE2QyxjQUFjLHNEQUFJLFdBQVcscURBQXFELGNBQWMsR0FBRyxHQUFHLHNEQUFJLFNBQVMsZ0RBQWdELHVEQUFLLFVBQVUsaURBQWlELHNEQUFJLFVBQVUsd0pBQXdKLEdBQUcsc0RBQUksV0FBVywrQkFBK0IsSUFBSSxHQUFHLEdBQUcsc0RBQUksU0FBUyxrQ0FBa0MsdURBQUssVUFBVSxrRkFBa0Ysc0RBQUksYUFBYSxrUkFBa1Isc0NBQXNDLHNEQUFJLGVBQWUsbUdBQW1HLEtBQUssR0FBRyxJQUFJLDJCQUEyQixzREFBSSxTQUFTLFVBQVUsc0RBQUksU0FBUyw2RkFBNkYsR0FBRyxLQUFLLElBQUksR0FBRyxHQUFHLHlCQUF5Qix1REFBSyxVQUFVLHlKQUF5Six1REFBSyxVQUFVLDJFQUEyRSxzREFBSSxXQUFXLG9EQUFvRCxhQUFhLHNEQUFJLFdBQVcsOENBQThDLGVBQWUsc0RBQUksV0FBVyw2Q0FBNkMsSUFBSSxHQUFHLHVEQUFLLFVBQVUsK0RBQStELHNEQUFJLGFBQWEsb1FBQW9RLEdBQUcsc0RBQUksVUFBVSx1RUFBdUUsb0JBQW9CO0FBQ3J1RTtBQUNBLHlEQUF5RCxzREFBSSxhQUFhLGdGQUFnRjtBQUMxSjtBQUNBLHNIQUFzSCxpRUFBaUUsUUFBUSxHQUFHLHVEQUFLLFVBQVUsNEZBQTRGLEdBQUcsc0RBQUksYUFBYSxrUkFBa1IsSUFBSSxJQUFJLEtBQUssSUFBSTtBQUNwbUI7QUFDQSxpRUFBZSxXQUFXLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib29raW5nQXBwLy4vc3JjL2Jvb2tpbmcvQm9va2luZ0xpc3QudHN4P2Q0ZTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjcmVhdGVQb3J0YWwgfSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgdXNlU2Vzc2lvbiBmcm9tIFwiLi91c2VTZXNzaW9uXCI7XG5pbXBvcnQgeyBjYW5jZWxCb29raW5nLCBtYWtlU2VsZWN0VmlzaWJsZUJvb2tpbmdzLCB1cGRhdGVCb29raW5nU3RhdHVzLCB9IGZyb20gXCIuLi9zdG9yZS9ib29raW5nc1NsaWNlXCI7XG5pbXBvcnQgeyB1c2VBcHBEaXNwYXRjaCB9IGZyb20gXCIuLi9zdG9yZS9ob29rc1wiO1xuaW1wb3J0IHsgdXNlU2VsZWN0b3IgfSBmcm9tIFwicmVhY3QtcmVkdXhcIjtcbmNvbnN0IFBBR0VfU0laRSA9IDU7XG5jb25zdCBzdGF0dXNDbGFzcyA9IHtcbiAgICBBcHByb3ZlZDogXCJiZy1lbWVyYWxkLTUwMC8xNSB0ZXh0LWVtZXJhbGQtMjAwIHJpbmctMSByaW5nLWVtZXJhbGQtNDAwLzIwXCIsXG4gICAgUGVuZGluZzogXCJiZy1hbWJlci01MDAvMTUgdGV4dC1hbWJlci0yMDAgcmluZy0xIHJpbmctYW1iZXItNDAwLzIwXCIsXG4gICAgQ2FuY2VsbGVkOiBcImJnLXJvc2UtNTAwLzE1IHRleHQtcm9zZS0yMDAgcmluZy0xIHJpbmctcm9zZS00MDAvMjBcIixcbiAgICBkZWZhdWx0OiBcImJnLXdoaXRlLzEwIHRleHQtd2hpdGUvODAgcmluZy0xIHJpbmctd2hpdGUvMTBcIixcbn07XG4vLyBpY29uc1xuY29uc3QgQ2hlY2sgPSAoKSA9PiAoX2pzeChcInN2Z1wiLCB7IHZpZXdCb3g6IFwiMCAwIDIwIDIwXCIsIGNsYXNzTmFtZTogXCJoLTQgdy00XCIsIGZpbGw6IFwiY3VycmVudENvbG9yXCIsIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIGNoaWxkcmVuOiBfanN4KFwicGF0aFwiLCB7IGQ6IFwiTTcuNSAxMy41IDQuNSAxMC41IDMgMTJsNC41IDQuNUwxNyA3bC0xLjUtMS41elwiIH0pIH0pKTtcbmNvbnN0IENoZXZyb24gPSAoKSA9PiAoX2pzeChcInN2Z1wiLCB7IHZpZXdCb3g6IFwiMCAwIDIwIDIwXCIsIGNsYXNzTmFtZTogXCJoLTQgdy00IG9wYWNpdHktODBcIiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiwgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiwgY2hpbGRyZW46IF9qc3goXCJwYXRoXCIsIHsgZDogXCJNNS44IDcuNSAxMCAxMS43bDQuMi00LjIgMS4zIDEuMy01LjUgNS41LTUuNS01LjV6XCIgfSkgfSkpO1xuLyoqIC0tLS0tLS0tLS0gUG9ydGFsIGhlbHBlcnMgLS0tLS0tLS0tLSAqL1xuZnVuY3Rpb24gdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdChmbiwgZGVwcykge1xuICAgIGNvbnN0IHVzZUxFID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IFJlYWN0LnVzZUxheW91dEVmZmVjdCA6IFJlYWN0LnVzZUVmZmVjdDtcbiAgICB1c2VMRShmbiwgZGVwcyk7XG59XG5mdW5jdGlvbiBNZW51UG9ydGFsKHsgY2hpbGRyZW4gfSkge1xuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiBjcmVhdGVQb3J0YWwoY2hpbGRyZW4sIGRvY3VtZW50LmJvZHkpO1xufVxuLyoqIC0tLS0tLS0tLS0gU3RhdHVzIGRyb3Bkb3duIHdpdGggcG9ydGFsIC0tLS0tLS0tLS0gKi9cbmNvbnN0IFN0YXR1c01lbnUgPSAoeyB2YWx1ZSwgb25DaGFuZ2UsIGRpc2FibGVkIH0pID0+IHtcbiAgICBjb25zdCBbb3Blbiwgc2V0T3Blbl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW2FjdGl2ZUlkeCwgc2V0QWN0aXZlSWR4XSA9IFJlYWN0LnVzZVN0YXRlKDApO1xuICAgIGNvbnN0IGJ0blJlZiA9IFJlYWN0LnVzZVJlZihudWxsKTtcbiAgICBjb25zdCBvcHRpb25zID0gW1wiUGVuZGluZ1wiLCBcIkFwcHJvdmVkXCIsIFwiQ2FuY2VsbGVkXCJdO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNldEFjdGl2ZUlkeChNYXRoLm1heCgwLCBvcHRpb25zLmZpbmRJbmRleCgobykgPT4gbyA9PT0gdmFsdWUpKSk7XG4gICAgfSwgW3ZhbHVlXSk7XG4gICAgLy8ga2V5Ym9hcmQgaW50ZXJhY3Rpb25zXG4gICAgZnVuY3Rpb24gaGFuZGxlS2V5KGUpIHtcbiAgICAgICAgaWYgKCFvcGVuKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIiB8fCBlLmtleSA9PT0gXCIgXCIpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc2V0T3Blbih0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgIHNldE9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgYnRuUmVmLmN1cnJlbnQ/LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUua2V5ID09PSBcIkFycm93RG93blwiKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzZXRBY3RpdmVJZHgoKGkpID0+IE1hdGgubWluKG9wdGlvbnMubGVuZ3RoIC0gMSwgaSArIDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5rZXkgPT09IFwiQXJyb3dVcFwiKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzZXRBY3RpdmVJZHgoKGkpID0+IE1hdGgubWF4KDAsIGkgLSAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IHNlbCA9IG9wdGlvbnNbYWN0aXZlSWR4XTtcbiAgICAgICAgICAgIGlmIChzZWwgJiYgc2VsICE9PSB2YWx1ZSlcbiAgICAgICAgICAgICAgICBvbkNoYW5nZShzZWwpO1xuICAgICAgICAgICAgc2V0T3BlbihmYWxzZSk7XG4gICAgICAgICAgICBidG5SZWYuY3VycmVudD8uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInJlbGF0aXZlIGlubGluZS1ibG9jayB0ZXh0LWxlZnRcIiwgb25LZXlEb3duOiBoYW5kbGVLZXksIGNoaWxkcmVuOiBbX2pzeHMoXCJidXR0b25cIiwgeyByZWY6IGJ0blJlZiwgdHlwZTogXCJidXR0b25cIiwgZGlzYWJsZWQ6IGRpc2FibGVkLCBvbkNsaWNrOiAoKSA9PiBzZXRPcGVuKChvKSA9PiAhbyksIGNsYXNzTmFtZTogXCJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcm91bmRlZC1sZyBweC0yLjUgcHktMS41IHRleHQteHMgZm9udC1zZW1pYm9sZFxcclxcbiAgICAgICAgICAgICAgICAgICBib3JkZXIgYm9yZGVyLXdoaXRlLzE1IGJnLXdoaXRlLzUgaG92ZXI6Ymctd2hpdGUvMTAgdGV4dC13aGl0ZS85MCB0cmFuc2l0aW9uXFxyXFxuICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkXCIsIFwiYXJpYS1oYXNwb3B1cFwiOiBcIm1lbnVcIiwgXCJhcmlhLWV4cGFuZGVkXCI6IG9wZW4sIGNoaWxkcmVuOiBbX2pzeHMoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHJvdW5kZWQtbWQgcHgtMiBweS0wLjUgcmluZy0xIHRleHQteHMgZm9udC1tZWRpdW1cclxuICAgICAgICAgICAgICAgICAgICAgICR7c3RhdHVzQ2xhc3NbdmFsdWVdID8/IHN0YXR1c0NsYXNzLmRlZmF1bHR9YCwgY2hpbGRyZW46IFtfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJoLTEuNSB3LTEuNSByb3VuZGVkLWZ1bGwgYmctY3VycmVudC84MFwiIH0pLCB2YWx1ZV0gfSksIF9qc3goQ2hldnJvbiwge30pXSB9KSwgb3BlbiAmJiBidG5SZWYuY3VycmVudCAmJiAoX2pzeChBbmNob3JlZE1lbnUsIHsgYW5jaG9yOiBidG5SZWYuY3VycmVudCwgdmFsdWU6IHZhbHVlLCBvcHRpb25zOiBvcHRpb25zLCBhY3RpdmVJZHg6IGFjdGl2ZUlkeCwgc2V0QWN0aXZlSWR4OiBzZXRBY3RpdmVJZHgsIG9uU2VsZWN0OiAob3B0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHQgIT09IHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2Uob3B0KTtcbiAgICAgICAgICAgICAgICAgICAgc2V0T3BlbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSwgb25DbG9zZTogKCkgPT4gc2V0T3BlbihmYWxzZSkgfSkpXSB9KSk7XG59O1xuZnVuY3Rpb24gQW5jaG9yZWRNZW51KHsgYW5jaG9yLCB2YWx1ZSwgb3B0aW9ucywgYWN0aXZlSWR4LCBzZXRBY3RpdmVJZHgsIG9uU2VsZWN0LCBvbkNsb3NlLCB9KSB7XG4gICAgY29uc3QgbWVudVJlZiA9IFJlYWN0LnVzZVJlZihudWxsKTtcbiAgICBjb25zdCBbcG9zLCBzZXRQb3NdID0gUmVhY3QudXNlU3RhdGUoe1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHdpZHRoOiAxNzYsXG4gICAgICAgIG9wZW5VcDogZmFsc2UsXG4gICAgfSk7XG4gICAgLy8gcGxhY2UgbmVhciBhbmNob3IgKHJpZ2h0LWFsaWduZWQpLCBmbGlwIGlmIG5lZWRlZFxuICAgIGNvbnN0IHBsYWNlID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBjb25zdCByID0gYW5jaG9yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IDE3NjsgLy8gdy00NFxuICAgICAgICBjb25zdCBtYXJnaW4gPSA4O1xuICAgICAgICAvLyBpbml0aWFsOiBvcGVuIGRvd253YXJkXG4gICAgICAgIGxldCB0b3AgPSByLmJvdHRvbSArIG1hcmdpbjtcbiAgICAgICAgbGV0IGxlZnQgPSByLnJpZ2h0IC0gd2lkdGg7XG4gICAgICAgIC8vIGNsYW1wIGxlZnQgd2l0aGluIHZpZXdwb3J0XG4gICAgICAgIGxlZnQgPSBNYXRoLm1heCg4LCBNYXRoLm1pbihsZWZ0LCB3aW5kb3cuaW5uZXJXaWR0aCAtIHdpZHRoIC0gOCkpO1xuICAgICAgICAvLyBpZiBub3QgZW5vdWdoIHNwYWNlIGJlbG93LCBmbGlwIHVwd2FyZCAoYWZ0ZXIgbWVhc3VyaW5nIG1lbnUgaGVpZ2h0KVxuICAgICAgICBsZXQgb3BlblVwID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IG1lbnVIID0gbWVudVJlZi5jdXJyZW50Py5vZmZzZXRIZWlnaHQgPz8gMDtcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCAtIHIuYm90dG9tIDwgKG1lbnVIIHx8IDE2MCkgKyBtYXJnaW4pIHtcbiAgICAgICAgICAgIG9wZW5VcCA9IHRydWU7XG4gICAgICAgICAgICB0b3AgPSByLnRvcCAtIG1hcmdpbiAtIChtZW51SCB8fCAxNjApO1xuICAgICAgICB9XG4gICAgICAgIHNldFBvcyh7IHRvcCwgbGVmdCwgd2lkdGgsIG9wZW5VcCB9KTtcbiAgICB9LCBbYW5jaG9yXSk7XG4gICAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHBsYWNlKCk7XG4gICAgfSwgW3BsYWNlXSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3Qgb25Eb2NDbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAobWVudVJlZi5jdXJyZW50Py5jb250YWlucyh0KSB8fCBhbmNob3IuY29udGFpbnModCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgb25DbG9zZSgpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvbktleSA9IChlKSA9PiBlLmtleSA9PT0gXCJFc2NhcGVcIiAmJiBvbkNsb3NlKCk7XG4gICAgICAgIGNvbnN0IG9uU2Nyb2xsID0gKCkgPT4gcGxhY2UoKTtcbiAgICAgICAgY29uc3Qgb25SZXNpemUgPSAoKSA9PiBwbGFjZSgpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG9uRG9jQ2xpY2spO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbktleSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIG9uU2Nyb2xsLCB0cnVlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgb25SZXNpemUpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBvbkRvY0NsaWNrKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIG9uS2V5KTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIG9uU2Nyb2xsLCB0cnVlKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIG9uUmVzaXplKTtcbiAgICAgICAgfTtcbiAgICB9LCBbYW5jaG9yLCBvbkNsb3NlLCBwbGFjZV0pO1xuICAgIHJldHVybiAoX2pzeChNZW51UG9ydGFsLCB7IGNoaWxkcmVuOiBfanN4KFwiZGl2XCIsIHsgcmVmOiBtZW51UmVmLCBjbGFzc05hbWU6IFwiZml4ZWQgei01MCBvdmVyZmxvdy1oaWRkZW4gcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLXdoaXRlLzEwIGJnLWVtZXJhbGQtOTUwLzk1IHNoYWRvdy0yeGwgYmFja2Ryb3AtYmx1clwiLCBzdHlsZTogeyB0b3A6IHBvcy50b3AsIGxlZnQ6IHBvcy5sZWZ0LCB3aWR0aDogcG9zLndpZHRoIH0sIG9uQ2xpY2s6IChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpLCBjaGlsZHJlbjogb3B0aW9ucy5tYXAoKG9wdCwgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBpZHggPT09IGFjdGl2ZUlkeDtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gb3B0ID09PSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKFwiYnV0dG9uXCIsIHsgcm9sZTogXCJtZW51aXRlbVwiLCBjbGFzc05hbWU6IGBmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGdhcC0yIHB4LTMgcHktMiB0ZXh0LXhzIHRleHQtd2hpdGUvOTAgJHtpc0FjdGl2ZSA/IFwiYmctd2hpdGUvMTBcIiA6IFwiaG92ZXI6Ymctd2hpdGUvMTBcIn1gLCBvbk1vdXNlRW50ZXI6ICgpID0+IHNldEFjdGl2ZUlkeChpZHgpLCBvbkNsaWNrOiAoKSA9PiBvblNlbGVjdChvcHQpLCBjaGlsZHJlbjogW19qc3goXCJzcGFuXCIsIHsgY2hpbGRyZW46IG9wdCB9KSwgaXNTZWxlY3RlZCAmJiAoX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwidGV4dC1lbWVyYWxkLTMwMFwiLCBjaGlsZHJlbjogX2pzeChDaGVjaywge30pIH0pKV0gfSwgb3B0KSk7XG4gICAgICAgICAgICB9KSB9KSB9KSk7XG59XG4vKiogLS0tLS0tLS0tLSBCb29raW5nIGxpc3QgLS0tLS0tLS0tLSAqL1xuY29uc3QgQm9va2luZ0xpc3QgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2Vzc2lvblVzZXIgPSB1c2VTZXNzaW9uKCk7XG4gICAgY29uc3QgZGlzcGF0Y2ggPSB1c2VBcHBEaXNwYXRjaCgpO1xuICAgIGNvbnN0IGFsbCA9IHVzZVNlbGVjdG9yKChzKSA9PiBzLmJvb2tpbmdzPy5hbGwgPz8gW10pO1xuICAgIC8vIFNlbGVjdG9yIHRoYXQgYWRhcHRzIHRvIGN1cnJlbnQgdXNlciB2aXNpYmlsaXR5XG4gICAgY29uc3Qgc2VsZWN0VmlzaWJsZSA9IHVzZU1lbW8oKCkgPT4gbWFrZVNlbGVjdFZpc2libGVCb29raW5ncyhzZXNzaW9uVXNlciA/PyB1bmRlZmluZWQpLCBbc2Vzc2lvblVzZXJdKTtcbiAgICAvLyBjb25zdCByb3dzID0gdXNlQXBwU2VsZWN0b3Ioc2VsZWN0VmlzaWJsZSk7XG4gICAgY29uc3QgdXNlciA9IHVzZVNlc3Npb24oKTtcbiAgICBjb25zdCB1c2VyQm9va2luZ3MgPSB1c2VTZWxlY3RvcigocykgPT4gcy5ib29raW5ncz8uYWxsID8/IFtdKTtcbiAgICBjb25zdCByb3dzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICAgIGlmICghdXNlcj8uZW1haWwpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIC8vIPCfkYcgQWRtaW4gY2FuIHNlZSBhbGwgYm9va2luZ3NcbiAgICAgICAgaWYgKHVzZXIuZW1haWwgPT09IFwiYWRtaW5AZXhhbXBsZS5jb21cIikge1xuICAgICAgICAgICAgcmV0dXJuIHVzZXJCb29raW5ncztcbiAgICAgICAgfVxuICAgICAgICAvLyDwn5GHIFJlZ3VsYXIgdXNlcnMgb25seSBzZWUgdGhlaXIgb3duXG4gICAgICAgIHJldHVybiB1c2VyQm9va2luZ3MuZmlsdGVyKChiKSA9PiBiLnVzZXI/LmVtYWlsID09PSB1c2VyLmVtYWlsKTtcbiAgICB9LCBbdXNlckJvb2tpbmdzLCB1c2VyXSk7XG4gICAgY29uc29sZS5sb2coeyByb3dzIH0pO1xuICAgIGNvbnN0IGNoYW5nZVN0YXR1cyA9IChpZCwgc3RhdHVzKSA9PiBkaXNwYXRjaCh1cGRhdGVCb29raW5nU3RhdHVzKHsgaWQsIHN0YXR1cyB9KSk7XG4gICAgLy8gR3VhcmQgZm9yIG5vbi1hZG1pbnNcbiAgICBjb25zdCB2aXNpYmxlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICAgIGlmICghdXNlcilcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgLy8gdHJlYXQgZWl0aGVyIHJvbGUgb3IgaGFyZGNvZGVkIGVtYWlsIGFzIGFkbWluXG4gICAgICAgIGNvbnN0IGlzQWRtaW4gPSB1c2VyLnJvbGUgPT09IFwiQWRtaW5cIiB8fCB1c2VyLmVtYWlsID09PSBcImFkbWluQGV4YW1wbGUuY29tXCI7XG4gICAgICAgIGlmIChpc0FkbWluKVxuICAgICAgICAgICAgcmV0dXJuIHVzZXJCb29raW5ncztcbiAgICAgICAgY29uc3QgbXlFbWFpbCA9ICh1c2VyLmVtYWlsID8/IFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHJldHVybiB1c2VyQm9va2luZ3MuZmlsdGVyKChiKSA9PiAoYi51c2VyPy5lbWFpbCA/PyBcIlwiKS50b0xvd2VyQ2FzZSgpID09PSBteUVtYWlsKTtcbiAgICB9LCBbdXNlckJvb2tpbmdzLCB1c2VyXSk7XG4gICAgLy8gUGFnaW5hdGlvblxuICAgIGNvbnN0IFtwYWdlLCBzZXRQYWdlXSA9IHVzZVN0YXRlKDEpO1xuICAgIGNvbnN0IHRvdGFsID0gdmlzaWJsZS5sZW5ndGg7XG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGgubWF4KDEsIE1hdGguY2VpbCh0b3RhbCAvIFBBR0VfU0laRSkpO1xuICAgIGNvbnN0IHN0YXJ0SWR4ID0gKHBhZ2UgLSAxKSAqIFBBR0VfU0laRTtcbiAgICBjb25zdCBlbmRJZHggPSBNYXRoLm1pbihzdGFydElkeCArIFBBR0VfU0laRSwgdG90YWwpO1xuICAgIGNvbnN0IHBhZ2VEYXRhID0gdXNlTWVtbygoKSA9PiB2aXNpYmxlLnNsaWNlKHN0YXJ0SWR4LCBlbmRJZHgpLCBbdmlzaWJsZSwgc3RhcnRJZHgsIGVuZElkeF0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7IGlmIChwYWdlID4gdG90YWxQYWdlcylcbiAgICAgICAgc2V0UGFnZSgxKTsgfSwgW3RvdGFsUGFnZXMsIHBhZ2VdKTtcbiAgICBjb25zdCBjYW5jZWwgPSAoaWQpID0+IGRpc3BhdGNoKGNhbmNlbEJvb2tpbmcoaWQpKTtcbiAgICByZXR1cm4gKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInctZnVsbCByb3VuZGVkLTJ4bCBweS00ICBcIiwgY2hpbGRyZW46IFtfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJtYi00IGZsZXggZmxleC1jb2wgZ2FwLTIgc206ZmxleC1yb3cgc206aXRlbXMtY2VudGVyIHNtOmp1c3RpZnktYmV0d2VlblwiLCBjaGlsZHJlbjogW19qc3goXCJoMlwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LWxnIHNtOnRleHQteGwgZm9udC1zZW1pYm9sZCB0ZXh0LXdoaXRlXCIsIGNoaWxkcmVuOiBcIllvdXIgQm9va2luZ3NcIiB9KSwgX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwidGV4dC14cyBzbTp0ZXh0LXNtIHRleHQtd2hpdGUvNzBcIiwgY2hpbGRyZW46IHRvdGFsID09PSAwID8gXCIwIHRvdGFsXCIgOiBgJHtzdGFydElkeCArIDF9LSR7ZW5kSWR4fSBvZiAke3RvdGFsfWAgfSldIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJvdmVyZmxvdy1oaWRkZW4gcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXdoaXRlLzEwXCIsIGNoaWxkcmVuOiBbX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzbTpoaWRkZW4gZGl2aWRlLXkgZGl2aWRlLXdoaXRlLzEwXCIsIGNoaWxkcmVuOiBwYWdlRGF0YS5sZW5ndGggPiAwID8gKHBhZ2VEYXRhLm1hcCgoYikgPT4gKF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwicC00IGJnLWJsYWNrLzEwXCIsIGNoaWxkcmVuOiBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLXN0YXJ0IGp1c3RpZnktYmV0d2VlbiBnYXAtM1wiLCBjaGlsZHJlbjogW19qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm1pbi13LTBcIiwgY2hpbGRyZW46IFtfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRleHQtYmFzZSBmb250LW1lZGl1bSB0ZXh0LXdoaXRlXCIsIGNoaWxkcmVuOiBiLmZhY2lsaXR5IH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJtdC0xIHRleHQteHMgdGV4dC13aGl0ZS84MFwiLCBjaGlsZHJlbjogW19qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImlubGluZS1ibG9jayBtci0zXCIsIGNoaWxkcmVuOiBiLmRhdGUgfSksIF9qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImlubGluZS1ibG9ja1wiLCBjaGlsZHJlbjogYi5zbG90IH0pXSB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibXQtMiBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LXNtXCIsIGNoaWxkcmVuOiBbX2pzeHMoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHJvdW5kZWQtbGcgcHgtMiBweS0wLjUgdGV4dC14cyBmb250LW1lZGl1bVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7c3RhdHVzQ2xhc3NbYi5zdGF0dXNdID8/IHN0YXR1c0NsYXNzLmRlZmF1bHR9YCwgY2hpbGRyZW46IFtfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJoLTEuNSB3LTEuNSByb3VuZGVkLWZ1bGwgYmctY3VycmVudC84MFwiIH0pLCBiLnN0YXR1c10gfSksIF9qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtd2hpdGUvNzBcIiwgY2hpbGRyZW46IFwiXFx1MjAyMlwiIH0pLCBfanN4cyhcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRleHQtd2hpdGUvOTBcIiwgY2hpbGRyZW46IFtfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJncmlkIGgtNiB3LTYgcGxhY2UtaXRlbXMtY2VudGVyIHJvdW5kZWQtZnVsbCBiZy13aGl0ZS8xMCB0ZXh0LVsxMHB4XSB0ZXh0LXdoaXRlLzgwXCIsIGNoaWxkcmVuOiAoYi51c2VyPy5uYW1lID8/IFwi4oCUXCIpLnNsaWNlKDAsIDEpLnRvVXBwZXJDYXNlKCkgfSksIGIudXNlcj8ubmFtZSA/PyBcIuKAlFwiXSB9KV0gfSldIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IHNocmluay0wIGdhcC0yXCIsIGNoaWxkcmVuOiBbc2Vzc2lvblVzZXI/LnJvbGUgIT09IFwiQWRtaW5cIiAmJiAoX2pzeChcImJ1dHRvblwiLCB7IG9uQ2xpY2s6ICgpID0+IGNhbmNlbChiLmlkKSwgZGlzYWJsZWQ6IGIuc3RhdHVzID09PSBcIkNhbmNlbGxlZFwiLCBjbGFzc05hbWU6IFwicm91bmRlZC1tZCBweC0zIHB5LTEuNSB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC13aGl0ZVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZy1yb3NlLTYwMC85MCBob3ZlcjpiZy1yb3NlLTYwMCBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiLCBjaGlsZHJlbjogXCJDYW5jZWxcIiB9KSksIHNlc3Npb25Vc2VyPy5yb2xlID09PSBcIkFkbWluXCIgJiYgKF9qc3goU3RhdHVzTWVudSwgeyB2YWx1ZTogYi5zdGF0dXMsIG9uQ2hhbmdlOiAobmV4dCkgPT4gY2hhbmdlU3RhdHVzKGIuaWQsIG5leHQpLCBkaXNhYmxlZDogYi5zdGF0dXMgPT09IFwiQ2FuY2VsbGVkXCIgfSkpXSB9KV0gfSkgfSwgYi5pZCkpKSkgOiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJweS0xMCBweC00IHRleHQtY2VudGVyIHRleHQtd2hpdGUvNzBcIiwgY2hpbGRyZW46IFwiTm8gYm9va2luZ3MgeWV0LlwiIH0pKSB9KSwgX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJoaWRkZW4gc206YmxvY2tcIiwgY2hpbGRyZW46IF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwib3ZlcmZsb3cteC1hdXRvXCIsIGNoaWxkcmVuOiBfanN4cyhcInRhYmxlXCIsIHsgY2xhc3NOYW1lOiBcIm1pbi13LWZ1bGwgdGV4dC1zbVwiLCBjaGlsZHJlbjogW19qc3goXCJ0aGVhZFwiLCB7IGNsYXNzTmFtZTogXCJzdGlja3kgdG9wLTAgei0xMCBiZy1lbWVyYWxkLTkwMC82MCBiYWNrZHJvcC1ibHVyIHRleHQtbGVmdCB0ZXh0LXdoaXRlLzgwXCIsIGNoaWxkcmVuOiBfanN4cyhcInRyXCIsIHsgY2xhc3NOYW1lOiBcIlsmPnRoXTpweS0zIFsmPnRoXTpweC00XCIsIGNoaWxkcmVuOiBbX2pzeChcInRoXCIsIHsgY2xhc3NOYW1lOiBcInctWzIyJV1cIiwgY2hpbGRyZW46IFwiRmFjaWxpdHlcIiB9KSwgX2pzeChcInRoXCIsIHsgY2xhc3NOYW1lOiBcInctWzE2JV1cIiwgY2hpbGRyZW46IFwiRGF0ZVwiIH0pLCBfanN4KFwidGhcIiwgeyBjbGFzc05hbWU6IFwidy1bMTYlXVwiLCBjaGlsZHJlbjogXCJTbG90XCIgfSksIF9qc3goXCJ0aFwiLCB7IGNsYXNzTmFtZTogXCJ3LVsxNiVdXCIsIGNoaWxkcmVuOiBcIlN0YXR1c1wiIH0pLCBfanN4KFwidGhcIiwgeyBjbGFzc05hbWU6IFwidy1bMTglXVwiLCBjaGlsZHJlbjogXCJCb29rZWQgQnlcIiB9KSwgX2pzeChcInRoXCIsIHsgY2xhc3NOYW1lOiBcInctWzEyJV0gdGV4dC1yaWdodFwiLCBjaGlsZHJlbjogXCJBY3Rpb25zXCIgfSldIH0pIH0pLCBfanN4cyhcInRib2R5XCIsIHsgY2xhc3NOYW1lOiBcImRpdmlkZS15IGRpdmlkZS13aGl0ZS8xMFwiLCBjaGlsZHJlbjogW3BhZ2VEYXRhLm1hcCgoYikgPT4gKF9qc3hzKFwidHJcIiwgeyBjbGFzc05hbWU6IFwiYWxpZ24tdG9wIHRyYW5zaXRpb24gaG92ZXI6Ymctd2hpdGUvNSBldmVuOmJnLXdoaXRlLzUvMzBcIiwgY2hpbGRyZW46IFtfanN4KFwidGRcIiwgeyBjbGFzc05hbWU6IFwicHktMyBweC00IHRleHQtd2hpdGVcIiwgY2hpbGRyZW46IGIuZmFjaWxpdHkgfSksIF9qc3goXCJ0ZFwiLCB7IGNsYXNzTmFtZTogXCJweS0zIHB4LTQgdGV4dC13aGl0ZS85MFwiLCBjaGlsZHJlbjogYi5kYXRlIH0pLCBfanN4KFwidGRcIiwgeyBjbGFzc05hbWU6IFwicHktMyBweC00IHRleHQtd2hpdGUvOTBcIiwgY2hpbGRyZW46IGIuc2xvdCB9KSwgX2pzeChcInRkXCIsIHsgY2xhc3NOYW1lOiBcInB5LTMgcHgtNFwiLCBjaGlsZHJlbjogX2pzeHMoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHJvdW5kZWQtbGcgcHgtMi41IHB5LTEgdGV4dC14cyBmb250LW1lZGl1bVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7c3RhdHVzQ2xhc3NbYi5zdGF0dXNdID8/IHN0YXR1c0NsYXNzLmRlZmF1bHR9YCwgY2hpbGRyZW46IFtfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJoLTEuNSB3LTEuNSByb3VuZGVkLWZ1bGwgYmctY3VycmVudC84MFwiIH0pLCBiLnN0YXR1c10gfSkgfSksIF9qc3goXCJ0ZFwiLCB7IGNsYXNzTmFtZTogXCJweS0zIHB4LTQgdGV4dC13aGl0ZS85MFwiLCBjaGlsZHJlbjogX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIiwgY2hpbGRyZW46IFtfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImdyaWQgaC03IHctNyBwbGFjZS1pdGVtcy1jZW50ZXIgcm91bmRlZC1mdWxsIGJnLXdoaXRlLzEwIHRleHQteHMgdGV4dC13aGl0ZS84MFwiLCBjaGlsZHJlbjogKGIudXNlcj8ubmFtZSA/PyBcIuKAlFwiKS5zbGljZSgwLCAxKS50b1VwcGVyQ2FzZSgpIH0pLCBfanN4KFwic3BhblwiLCB7IGNoaWxkcmVuOiBiLnVzZXI/Lm5hbWUgPz8gXCLigJRcIiB9KV0gfSkgfSksIF9qc3goXCJ0ZFwiLCB7IGNsYXNzTmFtZTogXCJweS0zIHB4LTRcIiwgY2hpbGRyZW46IF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXgganVzdGlmeS1lbmQgZ2FwLTJcIiwgY2hpbGRyZW46IFtzZXNzaW9uVXNlcj8ucm9sZSAhPT0gXCJBZG1pblwiICYmIChfanN4KFwiYnV0dG9uXCIsIHsgb25DbGljazogKCkgPT4gY2FuY2VsKGIuaWQpLCBkaXNhYmxlZDogYi5zdGF0dXMgPT09IFwiQ2FuY2VsbGVkXCIsIGNsYXNzTmFtZTogXCJyb3VuZGVkLWxnIHB4LTMgcHktMS41IHRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LXdoaXRlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZy1yb3NlLTYwMC85MCBob3ZlcjpiZy1yb3NlLTYwMCBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiLCBjaGlsZHJlbjogXCJDYW5jZWxcIiB9KSksIHNlc3Npb25Vc2VyPy5yb2xlID09PSBcIkFkbWluXCIgJiYgKF9qc3goU3RhdHVzTWVudSwgeyB2YWx1ZTogYi5zdGF0dXMsIG9uQ2hhbmdlOiAobmV4dCkgPT4gY2hhbmdlU3RhdHVzKGIuaWQsIG5leHQpLCBkaXNhYmxlZDogYi5zdGF0dXMgPT09IFwiQ2FuY2VsbGVkXCIgfSkpXSB9KSB9KV0gfSwgYi5pZCkpKSwgdG90YWwgPT09IDAgJiYgKF9qc3goXCJ0clwiLCB7IGNoaWxkcmVuOiBfanN4KFwidGRcIiwgeyBjb2xTcGFuOiA2LCBjbGFzc05hbWU6IFwicHktMTAgcHgtNCB0ZXh0LWNlbnRlciB0ZXh0LXdoaXRlLzcwXCIsIGNoaWxkcmVuOiBcIk5vIGJvb2tpbmdzIHlldC5cIiB9KSB9KSldIH0pXSB9KSB9KSB9KSwgdG90YWwgPiBQQUdFX1NJWkUgJiYgKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggZmxleC1jb2wgZ2FwLTMgc206ZmxleC1yb3cgc206aXRlbXMtY2VudGVyIHNtOmp1c3RpZnktYmV0d2VlbiBib3JkZXItdCBib3JkZXItd2hpdGUvMTAgYmctZW1lcmFsZC05NTAvNDAgcHgtMyBzbTpweC00IHB5LTNcIiwgY2hpbGRyZW46IFtfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJoaWRkZW4gc206YmxvY2sgdGV4dC14cyB0ZXh0LXdoaXRlLzYwXCIsIGNoaWxkcmVuOiBbXCJTaG93aW5nIFwiLCBfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXdoaXRlLzkwXCIsIGNoaWxkcmVuOiBzdGFydElkeCArIDEgfSksIFwiXFx1MjAxM1wiLCBfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXdoaXRlLzkwXCIsIGNoaWxkcmVuOiBlbmRJZHggfSksIFwiIG9mXCIsIFwiIFwiLCBfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXdoaXRlLzkwXCIsIGNoaWxkcmVuOiB0b3RhbCB9KV0gfSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktZW5kIGdhcC0xLjVcIiwgY2hpbGRyZW46IFtfanN4KFwiYnV0dG9uXCIsIHsgb25DbGljazogKCkgPT4gc2V0UGFnZSgocCkgPT4gTWF0aC5tYXgoMSwgcCAtIDEpKSwgZGlzYWJsZWQ6IHBhZ2UgPT09IDEsIGNsYXNzTmFtZTogXCJyb3VuZGVkLWxnIGJvcmRlciBib3JkZXItd2hpdGUvMTUgYmctd2hpdGUvNSBweC0zIHB5LTEuNSB0ZXh0LXhzIHRleHQtd2hpdGUvOTAgaG92ZXI6Ymctd2hpdGUvMTAgZGlzYWJsZWQ6b3BhY2l0eS00MFwiLCBcImFyaWEtbGFiZWxcIjogXCJQcmV2aW91cyBwYWdlXCIsIGNoaWxkcmVuOiBcIlxcdTIwMzkgUHJldlwiIH0pLCBfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImhpZGRlbiB4czpmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiLCBjaGlsZHJlbjogQXJyYXkuZnJvbSh7IGxlbmd0aDogdG90YWxQYWdlcyB9LCAoXywgaSkgPT4gaSArIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZShNYXRoLm1heCgwLCBNYXRoLm1pbihwYWdlIC0gMywgdG90YWxQYWdlcyAtIDUpKSwgTWF0aC5tYXgoNSwgTWF0aC5taW4odG90YWxQYWdlcywgcGFnZSArIDIpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocCkgPT4gKF9qc3goXCJidXR0b25cIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRQYWdlKHApLCBjbGFzc05hbWU6IGBoLTggdy04IHJvdW5kZWQtbWQgdGV4dC14cyBmb250LW1lZGl1bSAke3AgPT09IHBhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJiZy1lbWVyYWxkLTUwMCB0ZXh0LWVtZXJhbGQtOTUwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJib3JkZXIgYm9yZGVyLXdoaXRlLzE1IGJnLXdoaXRlLzUgdGV4dC13aGl0ZS85MCBob3ZlcjpiZy13aGl0ZS8xMFwifWAsIFwiYXJpYS1jdXJyZW50XCI6IHAgPT09IHBhZ2UgPyBcInBhZ2VcIiA6IHVuZGVmaW5lZCwgY2hpbGRyZW46IHAgfSwgcCkpKSB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwieHM6aGlkZGVuIHRleHQteHMgdGV4dC13aGl0ZS84MFwiLCBjaGlsZHJlbjogW1wiUGFnZSBcIiwgcGFnZSwgXCIgLyBcIiwgdG90YWxQYWdlc10gfSksIF9qc3goXCJidXR0b25cIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRQYWdlKChwKSA9PiBNYXRoLm1pbih0b3RhbFBhZ2VzLCBwICsgMSkpLCBkaXNhYmxlZDogcGFnZSA9PT0gdG90YWxQYWdlcywgY2xhc3NOYW1lOiBcInJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci13aGl0ZS8xNSBiZy13aGl0ZS81IHB4LTMgcHktMS41IHRleHQteHMgdGV4dC13aGl0ZS85MCBob3ZlcjpiZy13aGl0ZS8xMCBkaXNhYmxlZDpvcGFjaXR5LTQwXCIsIFwiYXJpYS1sYWJlbFwiOiBcIk5leHQgcGFnZVwiLCBjaGlsZHJlbjogXCJOZXh0IFxcdTIwM0FcIiB9KV0gfSldIH0pKV0gfSldIH0pKTtcbn07XG5leHBvcnQgZGVmYXVsdCBCb29raW5nTGlzdDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///541\n\n}')},638:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{eval('{\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(848);\n// EXTERNAL MODULE: ./node_modules/react-dom/client.js\nvar client = __webpack_require__(338);\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(647);\n// EXTERNAL MODULE: ./src/booking/UserBooking.tsx\nvar UserBooking = __webpack_require__(78);\n;// ./src/UserBookingWithStore.tsx\n\n\nfunction UserBookingWithStore() {\n    return ((0,jsx_runtime.jsx)(UserBooking/* default */.A, {}));\n}\n\n;// ./src/dev/DevPreview.tsx\n\n\nfunction DevPreview() {\n    return (0,jsx_runtime.jsx)(UserBookingWithStore, {});\n}\n\n;// ./src/bootstrap.tsx\n\n\n\n\nconst container = document.getElementById("root"); // assert not null\nconst root = (0,client/* createRoot */.H)(container);\nroot.render((0,jsx_runtime.jsx)(DevPreview, {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjM4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBZ0Q7QUFDQTtBQUNqQztBQUNmLFlBQVksbUJBQUksQ0FBQywwQkFBVyxJQUFJO0FBQ2hDOzs7QUNKZ0Q7QUFDVztBQUM1QztBQUNmLFdBQVcsbUJBQUksQ0FBQyxvQkFBb0IsSUFBSTtBQUN4Qzs7O0FDSmdEO0FBQ0Y7QUFDekI7QUFDcUI7QUFDMUMsbURBQW1EO0FBQ25ELGFBQWEsNEJBQVU7QUFDdkIsWUFBWSxtQkFBSSxDQUFDLFVBQVUsSUFBSSIsInNvdXJjZXMiOlsid2VicGFjazovL2Jvb2tpbmdBcHAvLi9zcmMvVXNlckJvb2tpbmdXaXRoU3RvcmUudHN4Pzc3ZjQiLCJ3ZWJwYWNrOi8vYm9va2luZ0FwcC8uL3NyYy9kZXYvRGV2UHJldmlldy50c3g/YWU5NSIsIndlYnBhY2s6Ly9ib29raW5nQXBwLy4vc3JjL2Jvb3RzdHJhcC50c3g/MjE3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IFVzZXJCb29raW5nIGZyb20gXCIuL2Jvb2tpbmcvVXNlckJvb2tpbmdcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFVzZXJCb29raW5nV2l0aFN0b3JlKCkge1xuICAgIHJldHVybiAoX2pzeChVc2VyQm9va2luZywge30pKTtcbn1cbiIsImltcG9ydCB7IGpzeCBhcyBfanN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgVXNlckJvb2tpbmdXaXRoU3RvcmUgZnJvbSBcIi4uL1VzZXJCb29raW5nV2l0aFN0b3JlXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEZXZQcmV2aWV3KCkge1xuICAgIHJldHVybiBfanN4KFVzZXJCb29raW5nV2l0aFN0b3JlLCB7fSk7XG59XG4iLCJpbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgY3JlYXRlUm9vdCB9IGZyb20gXCJyZWFjdC1kb20vY2xpZW50XCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IERldlByZXZpZXcgZnJvbSBcIi4vZGV2L0RldlByZXZpZXdcIjtcbmNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicm9vdFwiKTsgLy8gYXNzZXJ0IG5vdCBudWxsXG5jb25zdCByb290ID0gY3JlYXRlUm9vdChjb250YWluZXIpO1xucm9vdC5yZW5kZXIoX2pzeChEZXZQcmV2aWV3LCB7fSkpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///638\n\n}')},791:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('{/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(848);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(318);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _useSession__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(335);\n/* harmony import */ var _store_hooks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(498);\n\n\n\n// import { useDispatch } from "react-redux"; // âŒ unused\n\nconst facilities = ["Conference Room A", "Conference Room B", "Auditorium", "Cafeteria"];\nconst defaultSlots = ["09:00â€“10:00", "10:00â€“11:00", "11:00â€“12:00", "14:00â€“15:00", "15:00â€“16:00"];\n// "2025-09-27" -> local YYYY-MM-DD of now\nfunction localYMD(d = new Date()) {\n    const y = d.getFullYear();\n    const m = String(d.getMonth() + 1).padStart(2, "0");\n    const day = String(d.getDate()).padStart(2, "0");\n    return `${y}-${m}-${day}`;\n}\n// "09:00â€“10:00" or "09:00-10:00" -> minutes since midnight for the START\nfunction slotStartMinutes(slot) {\n    const [start] = slot.split(/â€“|-/); // en-dash or hyphen\n    const [h, m] = start.split(":").map(Number);\n    return h * 60 + (m || 0);\n}\n// Return true if chosen slot is in the past for today\'s date\nfunction isPastSlotForToday(dateStr, slot) {\n    if (dateStr !== localYMD())\n        return false; // only care about today\n    const now = new Date();\n    const nowMin = now.getHours() * 60 + now.getMinutes();\n    return slotStartMinutes(slot) <= nowMin; // block slot that already started\n}\nconst BookingForm = ({ onCreate }) => {\n    const user = (0,_useSession__WEBPACK_IMPORTED_MODULE_2__["default"])();\n    const [form, setForm] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        facility: facilities[0],\n        date: "",\n        slot: defaultSlots[0],\n        notes: "",\n    });\n    const [submitting, setSubmitting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [toast, setToast] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const disabled = !user;\n    function update(key, val) {\n        setForm((f) => ({ ...f, [key]: val }));\n    }\n    // utils\n    const pad = (n) => String(n).padStart(2, "0");\n    const toInputDate = (d) => `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`;\n    const today = new Date();\n    const tomorrow = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 1);\n    const MIN_DATE_ALLOW_TODAY = toInputDate(today);\n    const MIN_DATE_AFTER_TODAY = toInputDate(tomorrow);\n    const allBookings = (0,_store_hooks__WEBPACK_IMPORTED_MODULE_3__/* .useAppSelector */ .G)((state) => state.bookings.all);\n    const dispatch = (0,_store_hooks__WEBPACK_IMPORTED_MODULE_3__/* .useAppDispatch */ .j)();\n    async function submit(e) {\n        e.preventDefault();\n        if (disabled || submitting)\n            return;\n        if (isPastSlotForToday(form.date, form.slot)) {\n            setToast({\n                type: "error",\n                msg: "Please choose a future time slot for today.",\n            });\n            setTimeout(() => setToast(null), 2000);\n            return;\n        }\n        // ðŸš¨ conflict detection\n        const conflict = allBookings.some((b) => b.date === form.date && b.slot === form.slot && b.status !== "Cancelled");\n        if (conflict) {\n            setToast({ type: "error", msg: "A booking already exists for this date and time slot." });\n            setTimeout(() => setToast(null), 2000);\n            return;\n        }\n        setSubmitting(true);\n        setToast(null);\n        try {\n            const booking = {\n                id: crypto.randomUUID(),\n                facility: form.facility,\n                date: form.date,\n                slot: form.slot,\n                notes: form.notes || undefined,\n                status: "Pending",\n                user: user ? { id: user.id, name: user.name, email: user.email } : undefined,\n                createdAt: new Date().toISOString(),\n            };\n            dispatch({ type: "bookings/addBooking", payload: booking });\n            onCreate?.(booking);\n            await new Promise((r) => setTimeout(r, 700));\n            setForm((f) => ({ ...f, notes: "" }));\n            setToast({ type: "success", msg: "Your booking has been submitted successfully." });\n        }\n        catch (err) {\n            setToast({ type: "error", msg: "Something went wrong. Please try again." });\n        }\n        finally {\n            setSubmitting(false);\n            setTimeout(() => setToast(null), 2000);\n        }\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "space-y-5", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2", { className: "text-xl font-semibold text-white", children: "Create a Booking" }), !user && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "rounded-lg bg-amber-500/10 text-amber-200 px-3 py-2", children: "Please sign in from the host app to book a facility." })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form", { onSubmit: submit, className: "space-y-5", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { className: "block text-sm text-white/80 mb-1.5", children: "Facility" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "relative", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("select", { className: "w-full rounded-lg bg-emerald-950/40 border border-white/20 p-2.5\\r\\n                         text-white focus:outline-none focus:ring-2 focus:ring-emerald-400\\r\\n                         focus:border-emerald-400 appearance-none", value: form.facility, onChange: (e) => update("facility", e.target.value), children: facilities.map((f) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: f, className: "bg-emerald-900", children: f }, f))) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-white/60", children: "\\u25BE" })] })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "grid sm:grid-cols-2 gap-5", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { className: "block text-sm text-white/80 mb-1.5", children: "Date" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input", { type: "date", className: "w-full rounded-lg bg-emerald-950/40 border border-white/20 p-2.5\\r\\n                         text-white placeholder-white/40 focus:outline-none focus:ring-2\\r\\n                         focus:ring-emerald-400 focus:border-emerald-400", value: form.date, min: MIN_DATE_ALLOW_TODAY, onChange: (e) => {\n                                            const v = e.target.value;\n                                            const min = MIN_DATE_ALLOW_TODAY;\n                                            update("date", v && v < min ? min : v);\n                                        }, required: true })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { className: "block text-sm text-white/80 mb-1.5", children: "Time Slot" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "relative", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("select", { className: "w-full rounded-lg bg-emerald-950/40 border border-white/20 p-2.5\\r\\n                           text-white focus:outline-none focus:ring-2 focus:ring-emerald-400\\r\\n                           focus:border-emerald-400 appearance-none", value: form.slot, onChange: (e) => update("slot", e.target.value), children: defaultSlots.map((s) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option", { value: s, className: "bg-emerald-900", children: s }, s))) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-white/60", children: "\\u25BE" })] })] })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { className: "block text-sm text-white/80 mb-1.5", children: "Notes" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("textarea", { rows: 3, className: "w-full rounded-lg bg-emerald-950/40 border border-white/20 p-2.5\\r\\n                       text-white placeholder-white/40\\r\\n                       focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400", value: form.notes, onChange: (e) => update("notes", e.target.value), placeholder: "Agenda, special requests\\u2026" })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center gap-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { type: "submit", disabled: disabled || submitting, className: "inline-flex items-center gap-2 cursor-pointer rounded-xl bg-emerald-500 hover:bg-emerald-400 px-5 py-2.5 font-semibold\\r\\n                       text-emerald-950 transition disabled:opacity-50", children: submitting ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "h-5 w-5 animate-spin rounded-full border-2 border-emerald-900/40 border-t-emerald-900", "aria-hidden": "true" }), "Booking\\u2026"] })) : ("Book Facility") }), disabled && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-sm text-white/60", children: "Please fill required fields" })] })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "pointer-events-none fixed bottom-6 right-6 z-50", "aria-live": "polite", "aria-atomic": "true", children: toast && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: `pointer-events-auto flex justify-center flex-row items-start gap-3 rounded-xl border px-4 py-3 shadow-xl backdrop-blur\r\n              ${toast.type === "success"\n                        ? "bg-emerald-900/70 border-emerald-500/30 text-emerald-100"\n                        : "bg-rose-900/70 border-rose-500/30 text-rose-100"}`, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "", children: toast.type === "success" ? "âœ…" : "âš ï¸" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "text-sm font-medium mt-0.5", children: toast.msg }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { onClick: () => setToast(null), className: "ml-2 rounded-lg px-2 py-0.5 text-xs text-white/70 hover:text-white", "aria-label": "Dismiss notification", children: "Close" })] })) })] }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BookingForm);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzkxLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXNGO0FBQ3JEO0FBQ0s7QUFDdEMsWUFBWSxjQUFjLG9CQUFvQjtBQUNrQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBLHVCQUF1QixVQUFVO0FBQ2pDLGlCQUFpQix1REFBVTtBQUMzQiw0QkFBNEIsK0NBQVE7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsd0NBQXdDLCtDQUFRO0FBQ2hELDhCQUE4QiwrQ0FBUTtBQUN0QztBQUNBO0FBQ0EsMEJBQTBCLGtCQUFrQjtBQUM1QztBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsZ0JBQWdCLEdBQUcsc0JBQXNCLEdBQUcsaUJBQWlCO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFFQUFjO0FBQ3RDLHFCQUFxQixxRUFBYztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2RUFBNkU7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isa0RBQWtEO0FBQ2pGO0FBQ0E7QUFDQSx1QkFBdUIsK0NBQStDO0FBQ3RFO0FBQ0E7QUFDQSw4QkFBOEIsaUJBQWlCO0FBQy9DLHVCQUF1Qix1RUFBdUU7QUFDOUY7QUFDQTtBQUNBLHVCQUF1QiwrREFBK0Q7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1REFBSyxVQUFVLG1DQUFtQyxzREFBSSxTQUFTLDZFQUE2RSxhQUFhLHNEQUFJLFFBQVEsb0lBQW9JLElBQUksdURBQUssV0FBVyxxREFBcUQsdURBQUssVUFBVSxXQUFXLHNEQUFJLFlBQVksdUVBQXVFLEdBQUcsdURBQUssVUFBVSxrQ0FBa0Msc0RBQUksYUFBYSw4VkFBOFYsc0RBQUksYUFBYSxvREFBb0QsUUFBUSxHQUFHLHNEQUFJLFdBQVcsc0hBQXNILElBQUksSUFBSSxHQUFHLHVEQUFLLFVBQVUsbURBQW1ELHVEQUFLLFVBQVUsV0FBVyxzREFBSSxZQUFZLG1FQUFtRSxHQUFHLHNEQUFJLFlBQVk7QUFDcHpDO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxrQkFBa0IsSUFBSSxHQUFHLHVEQUFLLFVBQVUsV0FBVyxzREFBSSxZQUFZLHdFQUF3RSxHQUFHLHVEQUFLLFVBQVUsa0NBQWtDLHNEQUFJLGFBQWEsNFZBQTRWLHNEQUFJLGFBQWEsb0RBQW9ELFFBQVEsR0FBRyxzREFBSSxXQUFXLHNIQUFzSCxJQUFJLElBQUksSUFBSSxHQUFHLHVEQUFLLFVBQVUsV0FBVyxzREFBSSxZQUFZLG9FQUFvRSxHQUFHLHNEQUFJLGVBQWUsZ1hBQWdYLElBQUksR0FBRyx1REFBSyxVQUFVLGlEQUFpRCxzREFBSSxhQUFhLHlSQUF5Uix1REFBSyxDQUFDLHVEQUFTLElBQUksV0FBVyxzREFBSSxXQUFXLDJIQUEySCxxQkFBcUIsd0JBQXdCLGVBQWUsc0RBQUksV0FBVyw2RUFBNkUsSUFBSSxJQUFJLEdBQUcsc0RBQUksVUFBVSxnSUFBZ0ksdURBQUssVUFBVTtBQUN0b0UsZ0JBQWdCO0FBQ2hCO0FBQ0EsNEVBQTRFLGNBQWMsc0RBQUksVUFBVSxnRUFBZ0UsR0FBRyxzREFBSSxVQUFVLDhEQUE4RCxHQUFHLHNEQUFJLGFBQWEseUtBQXlLLElBQUksSUFBSSxJQUFJO0FBQ2hjO0FBQ0EsaUVBQWUsV0FBVyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm9va2luZ0FwcC8uL3NyYy9ib29raW5nL0Jvb2tpbmdGb3JtLnRzeD85MDZkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzLCBGcmFnbWVudCBhcyBfRnJhZ21lbnQgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgdXNlU2Vzc2lvbiBmcm9tIFwiLi91c2VTZXNzaW9uXCI7XG4vLyBpbXBvcnQgeyB1c2VEaXNwYXRjaCB9IGZyb20gXCJyZWFjdC1yZWR1eFwiOyAvLyDinYwgdW51c2VkXG5pbXBvcnQgeyB1c2VBcHBEaXNwYXRjaCwgdXNlQXBwU2VsZWN0b3IgfSBmcm9tIFwiLi4vc3RvcmUvaG9va3NcIjtcbmNvbnN0IGZhY2lsaXRpZXMgPSBbXCJDb25mZXJlbmNlIFJvb20gQVwiLCBcIkNvbmZlcmVuY2UgUm9vbSBCXCIsIFwiQXVkaXRvcml1bVwiLCBcIkNhZmV0ZXJpYVwiXTtcbmNvbnN0IGRlZmF1bHRTbG90cyA9IFtcIjA5OjAw4oCTMTA6MDBcIiwgXCIxMDowMOKAkzExOjAwXCIsIFwiMTE6MDDigJMxMjowMFwiLCBcIjE0OjAw4oCTMTU6MDBcIiwgXCIxNTowMOKAkzE2OjAwXCJdO1xuLy8gXCIyMDI1LTA5LTI3XCIgLT4gbG9jYWwgWVlZWS1NTS1ERCBvZiBub3dcbmZ1bmN0aW9uIGxvY2FsWU1EKGQgPSBuZXcgRGF0ZSgpKSB7XG4gICAgY29uc3QgeSA9IGQuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtID0gU3RyaW5nKGQuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICBjb25zdCBkYXkgPSBTdHJpbmcoZC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICByZXR1cm4gYCR7eX0tJHttfS0ke2RheX1gO1xufVxuLy8gXCIwOTowMOKAkzEwOjAwXCIgb3IgXCIwOTowMC0xMDowMFwiIC0+IG1pbnV0ZXMgc2luY2UgbWlkbmlnaHQgZm9yIHRoZSBTVEFSVFxuZnVuY3Rpb24gc2xvdFN0YXJ0TWludXRlcyhzbG90KSB7XG4gICAgY29uc3QgW3N0YXJ0XSA9IHNsb3Quc3BsaXQoL+KAk3wtLyk7IC8vIGVuLWRhc2ggb3IgaHlwaGVuXG4gICAgY29uc3QgW2gsIG1dID0gc3RhcnQuc3BsaXQoXCI6XCIpLm1hcChOdW1iZXIpO1xuICAgIHJldHVybiBoICogNjAgKyAobSB8fCAwKTtcbn1cbi8vIFJldHVybiB0cnVlIGlmIGNob3NlbiBzbG90IGlzIGluIHRoZSBwYXN0IGZvciB0b2RheSdzIGRhdGVcbmZ1bmN0aW9uIGlzUGFzdFNsb3RGb3JUb2RheShkYXRlU3RyLCBzbG90KSB7XG4gICAgaWYgKGRhdGVTdHIgIT09IGxvY2FsWU1EKCkpXG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gb25seSBjYXJlIGFib3V0IHRvZGF5XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBub3dNaW4gPSBub3cuZ2V0SG91cnMoKSAqIDYwICsgbm93LmdldE1pbnV0ZXMoKTtcbiAgICByZXR1cm4gc2xvdFN0YXJ0TWludXRlcyhzbG90KSA8PSBub3dNaW47IC8vIGJsb2NrIHNsb3QgdGhhdCBhbHJlYWR5IHN0YXJ0ZWRcbn1cbmNvbnN0IEJvb2tpbmdGb3JtID0gKHsgb25DcmVhdGUgfSkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSB1c2VTZXNzaW9uKCk7XG4gICAgY29uc3QgW2Zvcm0sIHNldEZvcm1dID0gdXNlU3RhdGUoe1xuICAgICAgICBmYWNpbGl0eTogZmFjaWxpdGllc1swXSxcbiAgICAgICAgZGF0ZTogXCJcIixcbiAgICAgICAgc2xvdDogZGVmYXVsdFNsb3RzWzBdLFxuICAgICAgICBub3RlczogXCJcIixcbiAgICB9KTtcbiAgICBjb25zdCBbc3VibWl0dGluZywgc2V0U3VibWl0dGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW3RvYXN0LCBzZXRUb2FzdF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBkaXNhYmxlZCA9ICF1c2VyO1xuICAgIGZ1bmN0aW9uIHVwZGF0ZShrZXksIHZhbCkge1xuICAgICAgICBzZXRGb3JtKChmKSA9PiAoeyAuLi5mLCBba2V5XTogdmFsIH0pKTtcbiAgICB9XG4gICAgLy8gdXRpbHNcbiAgICBjb25zdCBwYWQgPSAobikgPT4gU3RyaW5nKG4pLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICBjb25zdCB0b0lucHV0RGF0ZSA9IChkKSA9PiBgJHtkLmdldEZ1bGxZZWFyKCl9LSR7cGFkKGQuZ2V0TW9udGgoKSArIDEpfS0ke3BhZChkLmdldERhdGUoKSl9YDtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgdG9tb3Jyb3cgPSBuZXcgRGF0ZSh0b2RheS5nZXRGdWxsWWVhcigpLCB0b2RheS5nZXRNb250aCgpLCB0b2RheS5nZXREYXRlKCkgKyAxKTtcbiAgICBjb25zdCBNSU5fREFURV9BTExPV19UT0RBWSA9IHRvSW5wdXREYXRlKHRvZGF5KTtcbiAgICBjb25zdCBNSU5fREFURV9BRlRFUl9UT0RBWSA9IHRvSW5wdXREYXRlKHRvbW9ycm93KTtcbiAgICBjb25zdCBhbGxCb29raW5ncyA9IHVzZUFwcFNlbGVjdG9yKChzdGF0ZSkgPT4gc3RhdGUuYm9va2luZ3MuYWxsKTtcbiAgICBjb25zdCBkaXNwYXRjaCA9IHVzZUFwcERpc3BhdGNoKCk7XG4gICAgYXN5bmMgZnVuY3Rpb24gc3VibWl0KGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoZGlzYWJsZWQgfHwgc3VibWl0dGluZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGlzUGFzdFNsb3RGb3JUb2RheShmb3JtLmRhdGUsIGZvcm0uc2xvdCkpIHtcbiAgICAgICAgICAgIHNldFRvYXN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgbXNnOiBcIlBsZWFzZSBjaG9vc2UgYSBmdXR1cmUgdGltZSBzbG90IGZvciB0b2RheS5cIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzZXRUb2FzdChudWxsKSwgMjAwMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8g8J+aqCBjb25mbGljdCBkZXRlY3Rpb25cbiAgICAgICAgY29uc3QgY29uZmxpY3QgPSBhbGxCb29raW5ncy5zb21lKChiKSA9PiBiLmRhdGUgPT09IGZvcm0uZGF0ZSAmJiBiLnNsb3QgPT09IGZvcm0uc2xvdCAmJiBiLnN0YXR1cyAhPT0gXCJDYW5jZWxsZWRcIik7XG4gICAgICAgIGlmIChjb25mbGljdCkge1xuICAgICAgICAgICAgc2V0VG9hc3QoeyB0eXBlOiBcImVycm9yXCIsIG1zZzogXCJBIGJvb2tpbmcgYWxyZWFkeSBleGlzdHMgZm9yIHRoaXMgZGF0ZSBhbmQgdGltZSBzbG90LlwiIH0pO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzZXRUb2FzdChudWxsKSwgMjAwMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0U3VibWl0dGluZyh0cnVlKTtcbiAgICAgICAgc2V0VG9hc3QobnVsbCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBib29raW5nID0ge1xuICAgICAgICAgICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgICAgICAgIGZhY2lsaXR5OiBmb3JtLmZhY2lsaXR5LFxuICAgICAgICAgICAgICAgIGRhdGU6IGZvcm0uZGF0ZSxcbiAgICAgICAgICAgICAgICBzbG90OiBmb3JtLnNsb3QsXG4gICAgICAgICAgICAgICAgbm90ZXM6IGZvcm0ubm90ZXMgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHN0YXR1czogXCJQZW5kaW5nXCIsXG4gICAgICAgICAgICAgICAgdXNlcjogdXNlciA/IHsgaWQ6IHVzZXIuaWQsIG5hbWU6IHVzZXIubmFtZSwgZW1haWw6IHVzZXIuZW1haWwgfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6IFwiYm9va2luZ3MvYWRkQm9va2luZ1wiLCBwYXlsb2FkOiBib29raW5nIH0pO1xuICAgICAgICAgICAgb25DcmVhdGU/Lihib29raW5nKTtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIDcwMCkpO1xuICAgICAgICAgICAgc2V0Rm9ybSgoZikgPT4gKHsgLi4uZiwgbm90ZXM6IFwiXCIgfSkpO1xuICAgICAgICAgICAgc2V0VG9hc3QoeyB0eXBlOiBcInN1Y2Nlc3NcIiwgbXNnOiBcIllvdXIgYm9va2luZyBoYXMgYmVlbiBzdWJtaXR0ZWQgc3VjY2Vzc2Z1bGx5LlwiIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHNldFRvYXN0KHsgdHlwZTogXCJlcnJvclwiLCBtc2c6IFwiU29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBzZXRTdWJtaXR0aW5nKGZhbHNlKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0VG9hc3QobnVsbCksIDIwMDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3BhY2UteS01XCIsIGNoaWxkcmVuOiBbX2pzeChcImgyXCIsIHsgY2xhc3NOYW1lOiBcInRleHQteGwgZm9udC1zZW1pYm9sZCB0ZXh0LXdoaXRlXCIsIGNoaWxkcmVuOiBcIkNyZWF0ZSBhIEJvb2tpbmdcIiB9KSwgIXVzZXIgJiYgKF9qc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcInJvdW5kZWQtbGcgYmctYW1iZXItNTAwLzEwIHRleHQtYW1iZXItMjAwIHB4LTMgcHktMlwiLCBjaGlsZHJlbjogXCJQbGVhc2Ugc2lnbiBpbiBmcm9tIHRoZSBob3N0IGFwcCB0byBib29rIGEgZmFjaWxpdHkuXCIgfSkpLCBfanN4cyhcImZvcm1cIiwgeyBvblN1Ym1pdDogc3VibWl0LCBjbGFzc05hbWU6IFwic3BhY2UteS01XCIsIGNoaWxkcmVuOiBbX2pzeHMoXCJkaXZcIiwgeyBjaGlsZHJlbjogW19qc3goXCJsYWJlbFwiLCB7IGNsYXNzTmFtZTogXCJibG9jayB0ZXh0LXNtIHRleHQtd2hpdGUvODAgbWItMS41XCIsIGNoaWxkcmVuOiBcIkZhY2lsaXR5XCIgfSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInJlbGF0aXZlXCIsIGNoaWxkcmVuOiBbX2pzeChcInNlbGVjdFwiLCB7IGNsYXNzTmFtZTogXCJ3LWZ1bGwgcm91bmRlZC1sZyBiZy1lbWVyYWxkLTk1MC80MCBib3JkZXIgYm9yZGVyLXdoaXRlLzIwIHAtMi41XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtd2hpdGUgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWVtZXJhbGQtNDAwXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzOmJvcmRlci1lbWVyYWxkLTQwMCBhcHBlYXJhbmNlLW5vbmVcIiwgdmFsdWU6IGZvcm0uZmFjaWxpdHksIG9uQ2hhbmdlOiAoZSkgPT4gdXBkYXRlKFwiZmFjaWxpdHlcIiwgZS50YXJnZXQudmFsdWUpLCBjaGlsZHJlbjogZmFjaWxpdGllcy5tYXAoKGYpID0+IChfanN4KFwib3B0aW9uXCIsIHsgdmFsdWU6IGYsIGNsYXNzTmFtZTogXCJiZy1lbWVyYWxkLTkwMFwiLCBjaGlsZHJlbjogZiB9LCBmKSkpIH0pLCBfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJwb2ludGVyLWV2ZW50cy1ub25lIGFic29sdXRlIGluc2V0LXktMCByaWdodC0wIGZsZXggaXRlbXMtY2VudGVyIHByLTMgdGV4dC13aGl0ZS82MFwiLCBjaGlsZHJlbjogXCJcXHUyNUJFXCIgfSldIH0pXSB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZ3JpZCBzbTpncmlkLWNvbHMtMiBnYXAtNVwiLCBjaGlsZHJlbjogW19qc3hzKFwiZGl2XCIsIHsgY2hpbGRyZW46IFtfanN4KFwibGFiZWxcIiwgeyBjbGFzc05hbWU6IFwiYmxvY2sgdGV4dC1zbSB0ZXh0LXdoaXRlLzgwIG1iLTEuNVwiLCBjaGlsZHJlbjogXCJEYXRlXCIgfSksIF9qc3goXCJpbnB1dFwiLCB7IHR5cGU6IFwiZGF0ZVwiLCBjbGFzc05hbWU6IFwidy1mdWxsIHJvdW5kZWQtbGcgYmctZW1lcmFsZC05NTAvNDAgYm9yZGVyIGJvcmRlci13aGl0ZS8yMCBwLTIuNVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LXdoaXRlIHBsYWNlaG9sZGVyLXdoaXRlLzQwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXM6cmluZy1lbWVyYWxkLTQwMCBmb2N1czpib3JkZXItZW1lcmFsZC00MDBcIiwgdmFsdWU6IGZvcm0uZGF0ZSwgbWluOiBNSU5fREFURV9BTExPV19UT0RBWSwgb25DaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWluID0gTUlOX0RBVEVfQUxMT1dfVE9EQVk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZShcImRhdGVcIiwgdiAmJiB2IDwgbWluID8gbWluIDogdik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVxdWlyZWQ6IHRydWUgfSldIH0pLCBfanN4cyhcImRpdlwiLCB7IGNoaWxkcmVuOiBbX2pzeChcImxhYmVsXCIsIHsgY2xhc3NOYW1lOiBcImJsb2NrIHRleHQtc20gdGV4dC13aGl0ZS84MCBtYi0xLjVcIiwgY2hpbGRyZW46IFwiVGltZSBTbG90XCIgfSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInJlbGF0aXZlXCIsIGNoaWxkcmVuOiBbX2pzeChcInNlbGVjdFwiLCB7IGNsYXNzTmFtZTogXCJ3LWZ1bGwgcm91bmRlZC1sZyBiZy1lbWVyYWxkLTk1MC80MCBib3JkZXIgYm9yZGVyLXdoaXRlLzIwIHAtMi41XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC13aGl0ZSBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctZW1lcmFsZC00MDBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1czpib3JkZXItZW1lcmFsZC00MDAgYXBwZWFyYW5jZS1ub25lXCIsIHZhbHVlOiBmb3JtLnNsb3QsIG9uQ2hhbmdlOiAoZSkgPT4gdXBkYXRlKFwic2xvdFwiLCBlLnRhcmdldC52YWx1ZSksIGNoaWxkcmVuOiBkZWZhdWx0U2xvdHMubWFwKChzKSA9PiAoX2pzeChcIm9wdGlvblwiLCB7IHZhbHVlOiBzLCBjbGFzc05hbWU6IFwiYmctZW1lcmFsZC05MDBcIiwgY2hpbGRyZW46IHMgfSwgcykpKSB9KSwgX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwicG9pbnRlci1ldmVudHMtbm9uZSBhYnNvbHV0ZSBpbnNldC15LTAgcmlnaHQtMCBmbGV4IGl0ZW1zLWNlbnRlciBwci0zIHRleHQtd2hpdGUvNjBcIiwgY2hpbGRyZW46IFwiXFx1MjVCRVwiIH0pXSB9KV0gfSldIH0pLCBfanN4cyhcImRpdlwiLCB7IGNoaWxkcmVuOiBbX2pzeChcImxhYmVsXCIsIHsgY2xhc3NOYW1lOiBcImJsb2NrIHRleHQtc20gdGV4dC13aGl0ZS84MCBtYi0xLjVcIiwgY2hpbGRyZW46IFwiTm90ZXNcIiB9KSwgX2pzeChcInRleHRhcmVhXCIsIHsgcm93czogMywgY2xhc3NOYW1lOiBcInctZnVsbCByb3VuZGVkLWxnIGJnLWVtZXJhbGQtOTUwLzQwIGJvcmRlciBib3JkZXItd2hpdGUvMjAgcC0yLjVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgIHRleHQtd2hpdGUgcGxhY2Vob2xkZXItd2hpdGUvNDBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1lbWVyYWxkLTQwMCBmb2N1czpib3JkZXItZW1lcmFsZC00MDBcIiwgdmFsdWU6IGZvcm0ubm90ZXMsIG9uQ2hhbmdlOiAoZSkgPT4gdXBkYXRlKFwibm90ZXNcIiwgZS50YXJnZXQudmFsdWUpLCBwbGFjZWhvbGRlcjogXCJBZ2VuZGEsIHNwZWNpYWwgcmVxdWVzdHNcXHUyMDI2XCIgfSldIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiLCBjaGlsZHJlbjogW19qc3goXCJidXR0b25cIiwgeyB0eXBlOiBcInN1Ym1pdFwiLCBkaXNhYmxlZDogZGlzYWJsZWQgfHwgc3VibWl0dGluZywgY2xhc3NOYW1lOiBcImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBjdXJzb3ItcG9pbnRlciByb3VuZGVkLXhsIGJnLWVtZXJhbGQtNTAwIGhvdmVyOmJnLWVtZXJhbGQtNDAwIHB4LTUgcHktMi41IGZvbnQtc2VtaWJvbGRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgIHRleHQtZW1lcmFsZC05NTAgdHJhbnNpdGlvbiBkaXNhYmxlZDpvcGFjaXR5LTUwXCIsIGNoaWxkcmVuOiBzdWJtaXR0aW5nID8gKF9qc3hzKF9GcmFnbWVudCwgeyBjaGlsZHJlbjogW19qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImgtNSB3LTUgYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBib3JkZXItMiBib3JkZXItZW1lcmFsZC05MDAvNDAgYm9yZGVyLXQtZW1lcmFsZC05MDBcIiwgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiB9KSwgXCJCb29raW5nXFx1MjAyNlwiXSB9KSkgOiAoXCJCb29rIEZhY2lsaXR5XCIpIH0pLCBkaXNhYmxlZCAmJiBfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXNtIHRleHQtd2hpdGUvNjBcIiwgY2hpbGRyZW46IFwiUGxlYXNlIGZpbGwgcmVxdWlyZWQgZmllbGRzXCIgfSldIH0pXSB9KSwgX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJwb2ludGVyLWV2ZW50cy1ub25lIGZpeGVkIGJvdHRvbS02IHJpZ2h0LTYgei01MFwiLCBcImFyaWEtbGl2ZVwiOiBcInBvbGl0ZVwiLCBcImFyaWEtYXRvbWljXCI6IFwidHJ1ZVwiLCBjaGlsZHJlbjogdG9hc3QgJiYgKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBgcG9pbnRlci1ldmVudHMtYXV0byBmbGV4IGp1c3RpZnktY2VudGVyIGZsZXgtcm93IGl0ZW1zLXN0YXJ0IGdhcC0zIHJvdW5kZWQteGwgYm9yZGVyIHB4LTQgcHktMyBzaGFkb3cteGwgYmFja2Ryb3AtYmx1clxyXG4gICAgICAgICAgICAgICR7dG9hc3QudHlwZSA9PT0gXCJzdWNjZXNzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJiZy1lbWVyYWxkLTkwMC83MCBib3JkZXItZW1lcmFsZC01MDAvMzAgdGV4dC1lbWVyYWxkLTEwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwiYmctcm9zZS05MDAvNzAgYm9yZGVyLXJvc2UtNTAwLzMwIHRleHQtcm9zZS0xMDBcIn1gLCBjaGlsZHJlbjogW19qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiXCIsIGNoaWxkcmVuOiB0b2FzdC50eXBlID09PSBcInN1Y2Nlc3NcIiA/IFwi4pyFXCIgOiBcIuKaoO+4j1wiIH0pLCBfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRleHQtc20gZm9udC1tZWRpdW0gbXQtMC41XCIsIGNoaWxkcmVuOiB0b2FzdC5tc2cgfSksIF9qc3goXCJidXR0b25cIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRUb2FzdChudWxsKSwgY2xhc3NOYW1lOiBcIm1sLTIgcm91bmRlZC1sZyBweC0yIHB5LTAuNSB0ZXh0LXhzIHRleHQtd2hpdGUvNzAgaG92ZXI6dGV4dC13aGl0ZVwiLCBcImFyaWEtbGFiZWxcIjogXCJEaXNtaXNzIG5vdGlmaWNhdGlvblwiLCBjaGlsZHJlbjogXCJDbG9zZVwiIH0pXSB9KSkgfSldIH0pKTtcbn07XG5leHBvcnQgZGVmYXVsdCBCb29raW5nRm9ybTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///791\n\n}')},860:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('{/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cancelBooking: () => (/* binding */ cancelBooking),\n/* harmony export */   makeSelectVisibleBookings: () => (/* binding */ makeSelectVisibleBookings),\n/* harmony export */   updateBookingStatus: () => (/* binding */ updateBookingStatus)\n/* harmony export */ });\n/* unused harmony exports addBooking, bookingsReducer, selectAllBookings, selectBookingsCount */\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(468);\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__);\n\nconst seed = [\n// (optional) keep your existing demo rows here\n];\nconst initialState = { all: seed };\nconst bookingsSlice = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createSlice)({\n    name: "bookings",\n    initialState,\n    reducers: {\n        addBooking: (state, action) => {\n            state.all.unshift(action.payload);\n        },\n        cancelBooking: (state, action) => {\n            const booking = state.all.find((b) => b.id === action.payload);\n            if (booking)\n                booking.status = "Cancelled";\n        },\n        updateBookingStatus: (state, action) => {\n            const booking = state.all.find((b) => b.id === action.payload.id);\n            if (booking)\n                booking.status = action.payload.status;\n        },\n    }\n});\nconst { addBooking, cancelBooking, updateBookingStatus } = bookingsSlice.actions;\n/* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = (bookingsSlice.reducer);\nconst bookingsReducer = bookingsSlice.reducer;\n// Selectors\nconst selectAllBookings = (s) => s.bookings.all;\nconst makeSelectVisibleBookings = (user) => {\n    return (s) => {\n        const rows = s.bookings.all;\n        if (!user)\n            return rows;\n        return user.role === "Admin" ? rows : rows.filter(r => r.user?.id === user.id);\n    };\n};\nconst selectBookingsCount = (s) => s.bookings.all.length;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODYwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QixzQkFBc0IsNkRBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLENBQUM7QUFDTSxRQUFRLGlEQUFpRDtBQUNoRSxzRUFBZSxxQkFBcUIsRUFBQztBQUM5QjtBQUNQO0FBQ087QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib29raW5nQXBwLy4vc3JjL3N0b3JlL2Jvb2tpbmdzU2xpY2UudHM/NmY4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTbGljZSB9IGZyb20gXCJAcmVkdXhqcy90b29sa2l0XCI7XG5jb25zdCBzZWVkID0gW1xuLy8gKG9wdGlvbmFsKSBrZWVwIHlvdXIgZXhpc3RpbmcgZGVtbyByb3dzIGhlcmVcbl07XG5jb25zdCBpbml0aWFsU3RhdGUgPSB7IGFsbDogc2VlZCB9O1xuY29uc3QgYm9va2luZ3NTbGljZSA9IGNyZWF0ZVNsaWNlKHtcbiAgICBuYW1lOiBcImJvb2tpbmdzXCIsXG4gICAgaW5pdGlhbFN0YXRlLFxuICAgIHJlZHVjZXJzOiB7XG4gICAgICAgIGFkZEJvb2tpbmc6IChzdGF0ZSwgYWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBzdGF0ZS5hbGwudW5zaGlmdChhY3Rpb24ucGF5bG9hZCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhbmNlbEJvb2tpbmc6IChzdGF0ZSwgYWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBib29raW5nID0gc3RhdGUuYWxsLmZpbmQoKGIpID0+IGIuaWQgPT09IGFjdGlvbi5wYXlsb2FkKTtcbiAgICAgICAgICAgIGlmIChib29raW5nKVxuICAgICAgICAgICAgICAgIGJvb2tpbmcuc3RhdHVzID0gXCJDYW5jZWxsZWRcIjtcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlQm9va2luZ1N0YXR1czogKHN0YXRlLCBhY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJvb2tpbmcgPSBzdGF0ZS5hbGwuZmluZCgoYikgPT4gYi5pZCA9PT0gYWN0aW9uLnBheWxvYWQuaWQpO1xuICAgICAgICAgICAgaWYgKGJvb2tpbmcpXG4gICAgICAgICAgICAgICAgYm9va2luZy5zdGF0dXMgPSBhY3Rpb24ucGF5bG9hZC5zdGF0dXM7XG4gICAgICAgIH0sXG4gICAgfVxufSk7XG5leHBvcnQgY29uc3QgeyBhZGRCb29raW5nLCBjYW5jZWxCb29raW5nLCB1cGRhdGVCb29raW5nU3RhdHVzIH0gPSBib29raW5nc1NsaWNlLmFjdGlvbnM7XG5leHBvcnQgZGVmYXVsdCBib29raW5nc1NsaWNlLnJlZHVjZXI7XG5leHBvcnQgY29uc3QgYm9va2luZ3NSZWR1Y2VyID0gYm9va2luZ3NTbGljZS5yZWR1Y2VyO1xuLy8gU2VsZWN0b3JzXG5leHBvcnQgY29uc3Qgc2VsZWN0QWxsQm9va2luZ3MgPSAocykgPT4gcy5ib29raW5ncy5hbGw7XG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdFZpc2libGVCb29raW5ncyA9ICh1c2VyKSA9PiB7XG4gICAgcmV0dXJuIChzKSA9PiB7XG4gICAgICAgIGNvbnN0IHJvd3MgPSBzLmJvb2tpbmdzLmFsbDtcbiAgICAgICAgaWYgKCF1c2VyKVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIHJldHVybiB1c2VyLnJvbGUgPT09IFwiQWRtaW5cIiA/IHJvd3MgOiByb3dzLmZpbHRlcihyID0+IHIudXNlcj8uaWQgPT09IHVzZXIuaWQpO1xuICAgIH07XG59O1xuZXhwb3J0IGNvbnN0IHNlbGVjdEJvb2tpbmdzQ291bnQgPSAocykgPT4gcy5ib29raW5ncy5hbGwubGVuZ3RoO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///860\n\n}')}}]);