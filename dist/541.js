"use strict";(self.webpackChunkbookingApp=self.webpackChunkbookingApp||[]).push([[335,541,860],{20:(__unused_webpack_module,exports,__webpack_require__)=>{eval('{/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar f=__webpack_require__(318),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=""+g);void 0!==a.key&&(e=""+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2EsTUFBTSxtQkFBTyxDQUFDLEdBQU8sNktBQTZLO0FBQy9NLGtCQUFrQixVQUFVLGVBQWUscUJBQXFCLDZCQUE2QiwwQkFBMEIsMERBQTBELDRFQUE0RSxPQUFPLHdEQUF3RCxnQkFBZ0IsR0FBRyxXQUFXLEdBQUcsWUFBWSIsInNvdXJjZXMiOlsid2VicGFjazovL2Jvb2tpbmdBcHAvLi9ub2RlX21vZHVsZXMvcmVhY3QvY2pzL3JlYWN0LWpzeC1ydW50aW1lLnByb2R1Y3Rpb24ubWluLmpzP2QzMWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZSBSZWFjdFxuICogcmVhY3QtanN4LXJ1bnRpbWUucHJvZHVjdGlvbi5taW4uanNcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO3ZhciBmPXJlcXVpcmUoXCJyZWFjdFwiKSxrPVN5bWJvbC5mb3IoXCJyZWFjdC5lbGVtZW50XCIpLGw9U3ltYm9sLmZvcihcInJlYWN0LmZyYWdtZW50XCIpLG09T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxuPWYuX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQuUmVhY3RDdXJyZW50T3duZXIscD17a2V5OiEwLHJlZjohMCxfX3NlbGY6ITAsX19zb3VyY2U6ITB9O1xuZnVuY3Rpb24gcShjLGEsZyl7dmFyIGIsZD17fSxlPW51bGwsaD1udWxsO3ZvaWQgMCE9PWcmJihlPVwiXCIrZyk7dm9pZCAwIT09YS5rZXkmJihlPVwiXCIrYS5rZXkpO3ZvaWQgMCE9PWEucmVmJiYoaD1hLnJlZik7Zm9yKGIgaW4gYSltLmNhbGwoYSxiKSYmIXAuaGFzT3duUHJvcGVydHkoYikmJihkW2JdPWFbYl0pO2lmKGMmJmMuZGVmYXVsdFByb3BzKWZvcihiIGluIGE9Yy5kZWZhdWx0UHJvcHMsYSl2b2lkIDA9PT1kW2JdJiYoZFtiXT1hW2JdKTtyZXR1cm57JCR0eXBlb2Y6ayx0eXBlOmMsa2V5OmUscmVmOmgscHJvcHM6ZCxfb3duZXI6bi5jdXJyZW50fX1leHBvcnRzLkZyYWdtZW50PWw7ZXhwb3J0cy5qc3g9cTtleHBvcnRzLmpzeHM9cTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///20\n\n}')},335:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ useSession)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(318);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction useSession() {\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => {\n        try {\n            return JSON.parse(localStorage.getItem("authUser") || "null");\n        }\n        catch {\n            return null;\n        }\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n        const onLogin = (e) => setUser(e.detail);\n        const onLogout = () => setUser(null);\n        window.addEventListener("auth:login", onLogin);\n        window.addEventListener("auth:logout", onLogout);\n        return () => {\n            window.removeEventListener("auth:login", onLogin);\n            window.removeEventListener("auth:logout", onLogout);\n        };\n    }, []);\n    return user;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzM1LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0QztBQUM3QjtBQUNmLDRCQUE0QiwrQ0FBUTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Jvb2tpbmdBcHAvLi9zcmMvYm9va2luZy91c2VTZXNzaW9uLnRzP2VkMzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlU2Vzc2lvbigpIHtcbiAgICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZSgoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImF1dGhVc2VyXCIpIHx8IFwibnVsbFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IG9uTG9naW4gPSAoZSkgPT4gc2V0VXNlcihlLmRldGFpbCk7XG4gICAgICAgIGNvbnN0IG9uTG9nb3V0ID0gKCkgPT4gc2V0VXNlcihudWxsKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJhdXRoOmxvZ2luXCIsIG9uTG9naW4pO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImF1dGg6bG9nb3V0XCIsIG9uTG9nb3V0KTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYXV0aDpsb2dpblwiLCBvbkxvZ2luKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYXV0aDpsb2dvdXRcIiwgb25Mb2dvdXQpO1xuICAgICAgICB9O1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gdXNlcjtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///335\n\n}')},498:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("{/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   G: () => (/* binding */ useAppSelector),\n/* harmony export */   j: () => (/* binding */ useAppDispatch)\n/* harmony export */ });\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(868);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_0__);\n\nconst useAppDispatch = () => (0,react_redux__WEBPACK_IMPORTED_MODULE_0__.useDispatch)();\nconst useAppSelector = react_redux__WEBPACK_IMPORTED_MODULE_0__.useSelector;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDk4LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1RDtBQUNoRCw2QkFBNkIsd0RBQVc7QUFDeEMsdUJBQXVCLG9EQUFXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm9va2luZ0FwcC8uL3NyYy9zdG9yZS9ob29rcy50cz83MDllIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xuZXhwb3J0IGNvbnN0IHVzZUFwcERpc3BhdGNoID0gKCkgPT4gdXNlRGlzcGF0Y2goKTtcbmV4cG9ydCBjb25zdCB1c2VBcHBTZWxlY3RvciA9IHVzZVNlbGVjdG9yO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///498\n\n}")},541:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(848);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(318);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(676);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _useSession__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(335);\n/* harmony import */ var _store_bookingsSlice__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(860);\n/* harmony import */ var _store_hooks__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(498);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(868);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\nconst PAGE_SIZE = 5;\nconst statusClass = {\n    Approved: "bg-emerald-500/15 text-emerald-200 ring-1 ring-emerald-400/20",\n    Pending: "bg-amber-500/15 text-amber-200 ring-1 ring-amber-400/20",\n    Cancelled: "bg-rose-500/15 text-rose-200 ring-1 ring-rose-400/20",\n    default: "bg-white/10 text-white/80 ring-1 ring-white/10",\n};\n// icons\nconst Check = () => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", { viewBox: "0 0 20 20", className: "h-4 w-4", fill: "currentColor", "aria-hidden": "true", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", { d: "M7.5 13.5 4.5 10.5 3 12l4.5 4.5L17 7l-1.5-1.5z" }) }));\nconst Chevron = () => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", { viewBox: "0 0 20 20", className: "h-4 w-4 opacity-80", fill: "currentColor", "aria-hidden": "true", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", { d: "M5.8 7.5 10 11.7l4.2-4.2 1.3 1.3-5.5 5.5-5.5-5.5z" }) }));\n/** ---------- Portal helpers ---------- */\nfunction useIsomorphicLayoutEffect(fn, deps) {\n    const useLE = typeof window !== "undefined" ? (react__WEBPACK_IMPORTED_MODULE_1___default().useLayoutEffect) : (react__WEBPACK_IMPORTED_MODULE_1___default().useEffect);\n    useLE(fn, deps);\n}\nfunction MenuPortal({ children }) {\n    if (typeof document === "undefined")\n        return null;\n    return (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(children, document.body);\n}\n/** ---------- Status dropdown with portal ---------- */\nconst StatusMenu = ({ value, onChange, disabled }) => {\n    const [open, setOpen] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(false);\n    const [activeIdx, setActiveIdx] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(0);\n    const btnRef = react__WEBPACK_IMPORTED_MODULE_1___default().useRef(null);\n    const options = ["Pending", "Approved", "Cancelled"];\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        setActiveIdx(Math.max(0, options.findIndex((o) => o === value)));\n    }, [value]);\n    // keyboard interactions\n    function handleKey(e) {\n        if (!open) {\n            if (e.key === "Enter" || e.key === " ") {\n                e.preventDefault();\n                setOpen(true);\n            }\n            return;\n        }\n        if (e.key === "Escape") {\n            setOpen(false);\n            btnRef.current?.focus();\n        }\n        if (e.key === "ArrowDown") {\n            e.preventDefault();\n            setActiveIdx((i) => Math.min(options.length - 1, i + 1));\n        }\n        if (e.key === "ArrowUp") {\n            e.preventDefault();\n            setActiveIdx((i) => Math.max(0, i - 1));\n        }\n        if (e.key === "Enter") {\n            e.preventDefault();\n            const sel = options[activeIdx];\n            if (sel && sel !== value)\n                onChange(sel);\n            setOpen(false);\n            btnRef.current?.focus();\n        }\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "relative inline-block text-left", onKeyDown: handleKey, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button", { ref: btnRef, type: "button", disabled: disabled, onClick: () => setOpen((o) => !o), className: "inline-flex items-center gap-2 rounded-lg px-2.5 py-1.5 text-xs font-semibold\\r\\n                   border border-white/15 bg-white/5 hover:bg-white/10 text-white/90 transition\\r\\n                   disabled:opacity-50 disabled:cursor-not-allowed", "aria-haspopup": "menu", "aria-expanded": open, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { className: `inline-flex items-center gap-2 rounded-md px-2 py-0.5 ring-1 text-xs font-medium\r\n                      ${statusClass[value] ?? statusClass.default}`, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "h-1.5 w-1.5 rounded-full bg-current/80" }), value] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Chevron, {})] }), open && btnRef.current && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(AnchoredMenu, { anchor: btnRef.current, value: value, options: options, activeIdx: activeIdx, setActiveIdx: setActiveIdx, onSelect: (opt) => {\n                    if (opt !== value)\n                        onChange(opt);\n                    setOpen(false);\n                }, onClose: () => setOpen(false) }))] }));\n};\nfunction AnchoredMenu({ anchor, value, options, activeIdx, setActiveIdx, onSelect, onClose, }) {\n    const menuRef = react__WEBPACK_IMPORTED_MODULE_1___default().useRef(null);\n    const [pos, setPos] = react__WEBPACK_IMPORTED_MODULE_1___default().useState({\n        top: 0,\n        left: 0,\n        width: 176,\n        openUp: false,\n    });\n    // place near anchor (right-aligned), flip if needed\n    const place = react__WEBPACK_IMPORTED_MODULE_1___default().useCallback(() => {\n        const r = anchor.getBoundingClientRect();\n        const width = 176; // w-44\n        const margin = 8;\n        // initial open downward\n        let top = r.bottom + margin;\n        let left = r.right - width;\n        // clamp left within viewport\n        left = Math.max(8, Math.min(left, window.innerWidth - width - 8));\n        // if not enough space below, flip upward (after measuring menu height)\n        let openUp = false;\n        const menuH = menuRef.current?.offsetHeight ?? 0;\n        if (window.innerHeight - r.bottom < (menuH || 160) + margin) {\n            openUp = true;\n            top = r.top - margin - (menuH || 160);\n        }\n        setPos({ top, left, width, openUp });\n    }, [anchor]);\n    useIsomorphicLayoutEffect(() => {\n        place();\n    }, [place]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        const onDocClick = (e) => {\n            const t = e.target;\n            if (menuRef.current?.contains(t) || anchor.contains(t))\n                return;\n            onClose();\n        };\n        const onKey = (e) => e.key === "Escape" && onClose();\n        const onScroll = () => place();\n        const onResize = () => place();\n        document.addEventListener("mousedown", onDocClick);\n        document.addEventListener("keydown", onKey);\n        window.addEventListener("scroll", onScroll, true);\n        window.addEventListener("resize", onResize);\n        return () => {\n            document.removeEventListener("mousedown", onDocClick);\n            document.removeEventListener("keydown", onKey);\n            window.removeEventListener("scroll", onScroll, true);\n            window.removeEventListener("resize", onResize);\n        };\n    }, [anchor, onClose, place]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(MenuPortal, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: menuRef, className: "fixed z-50 overflow-hidden rounded-lg border border-white/10 bg-emerald-950/95 shadow-2xl backdrop-blur", style: { top: pos.top, left: pos.left, width: pos.width }, onClick: (e) => e.stopPropagation(), children: options.map((opt, idx) => {\n                const isActive = idx === activeIdx;\n                const isSelected = opt === value;\n                return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button", { role: "menuitem", className: `flex w-full items-center justify-between gap-2 px-3 py-2 text-xs text-white/90 ${isActive ? "bg-white/10" : "hover:bg-white/10"}`, onMouseEnter: () => setActiveIdx(idx), onClick: () => onSelect(opt), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: opt }), isSelected && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-emerald-300", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Check, {}) }))] }, opt));\n            }) }) }));\n}\n/** ---------- Booking list ---------- */\nconst BookingList = () => {\n    const sessionUser = (0,_useSession__WEBPACK_IMPORTED_MODULE_3__["default"])();\n    const dispatch = (0,_store_hooks__WEBPACK_IMPORTED_MODULE_5__/* .useAppDispatch */ .j)();\n    const all = (0,react_redux__WEBPACK_IMPORTED_MODULE_6__.useSelector)((s) => s.bookings?.all ?? []);\n    // const rows = useAppSelector(selectVisible);\n    const user = (0,_useSession__WEBPACK_IMPORTED_MODULE_3__["default"])();\n    const userBookings = (0,react_redux__WEBPACK_IMPORTED_MODULE_6__.useSelector)((s) => s.bookings?.all ?? []);\n    const rows = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n        if (!user?.email)\n            return [];\n        if (user.email === "admin@example.com") {\n            return userBookings;\n        }\n        return userBookings.filter((b) => b.user?.email === user.email);\n    }, [userBookings, user]);\n    console.log({ rows });\n    const changeStatus = (id, status) => dispatch((0,_store_bookingsSlice__WEBPACK_IMPORTED_MODULE_4__.updateBookingStatus)({ id, status }));\n    const visible = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n        if (!user)\n            return [];\n        // treat either role or hardcoded email as admin\n        const isAdmin = user.role === "Admin" || user.email === "admin@example.com";\n        if (isAdmin)\n            return userBookings;\n        const myEmail = (user.email ?? "").toLowerCase();\n        return userBookings.filter((b) => (b.user?.email ?? "").toLowerCase() === myEmail);\n    }, [userBookings, user]);\n    // Pagination\n    const [page, setPage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1);\n    const total = visible.length;\n    const totalPages = Math.max(1, Math.ceil(total / PAGE_SIZE));\n    const startIdx = (page - 1) * PAGE_SIZE;\n    const endIdx = Math.min(startIdx + PAGE_SIZE, total);\n    const pageData = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => visible.slice(startIdx, endIdx), [visible, startIdx, endIdx]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => { if (page > totalPages)\n        setPage(1); }, [totalPages, page]);\n    const cancel = (id) => dispatch((0,_store_bookingsSlice__WEBPACK_IMPORTED_MODULE_4__.cancelBooking)(id));\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "w-full rounded-2xl py-4  ", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "mb-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2", { className: "text-lg sm:text-xl font-semibold text-white", children: "Your Bookings" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-xs sm:text-sm text-white/70", children: total === 0 ? "0 total" : `${startIdx + 1}-${endIdx} of ${total}` })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "overflow-hidden rounded-xl border border-white/10", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "sm:hidden divide-y divide-white/10", children: pageData.length > 0 ? (pageData.map((b) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "p-4 bg-black/10", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-start justify-between gap-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "min-w-0", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "text-base font-medium text-white", children: b.facility }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "mt-1 text-xs text-white/80", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "inline-block mr-3", children: b.date }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "inline-block", children: b.slot })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "mt-2 flex items-center gap-2 text-sm", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { className: `inline-flex items-center gap-2 rounded-lg px-2 py-0.5 text-xs font-medium\r\n                                ${statusClass[b.status] ?? statusClass.default}`, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "h-1.5 w-1.5 rounded-full bg-current/80" }), b.status] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-white/70", children: "\\u2022" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { className: "inline-flex items-center gap-2 text-white/90", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "grid h-6 w-6 place-items-center rounded-full bg-white/10 text-[10px] text-white/80", children: (b.user?.name ?? "—").slice(0, 1).toUpperCase() }), b.user?.name ?? "—"] })] })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex shrink-0 gap-2", children: [sessionUser?.role !== "Admin" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { onClick: () => cancel(b.id), disabled: b.status === "Cancelled", className: "rounded-md px-3 py-1.5 text-xs font-semibold text-white\\r\\n                               bg-rose-600/90 hover:bg-rose-600 disabled:opacity-50 disabled:cursor-not-allowed", children: "Cancel" })), sessionUser?.role === "Admin" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StatusMenu, { value: b.status, onChange: (next) => changeStatus(b.id, next), disabled: b.status === "Cancelled" }))] })] }) }, b.id)))) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "py-10 px-4 text-center text-white/70", children: "No bookings yet." })) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "hidden sm:block", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "overflow-x-auto", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("table", { className: "min-w-full text-sm", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("thead", { className: "sticky top-0 z-10 bg-emerald-900/60 backdrop-blur text-left text-white/80", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("tr", { className: "[&>th]:py-3 [&>th]:px-4", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th", { className: "w-[22%]", children: "Facility" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th", { className: "w-[16%]", children: "Date" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th", { className: "w-[16%]", children: "Slot" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th", { className: "w-[16%]", children: "Status" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th", { className: "w-[18%]", children: "Booked By" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("th", { className: "w-[12%] text-right", children: "Actions" })] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("tbody", { className: "divide-y divide-white/10", children: [pageData.map((b) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("tr", { className: "align-top transition hover:bg-white/5 even:bg-white/5/30", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { className: "py-3 px-4 text-white", children: b.facility }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { className: "py-3 px-4 text-white/90", children: b.date }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { className: "py-3 px-4 text-white/90", children: b.slot }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { className: "py-3 px-4", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { className: `inline-flex items-center gap-2 rounded-lg px-2.5 py-1 text-xs font-medium\r\n                                ${statusClass[b.status] ?? statusClass.default}`, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "h-1.5 w-1.5 rounded-full bg-current/80" }), b.status] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { className: "py-3 px-4 text-white/90", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center gap-2", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "grid h-7 w-7 place-items-center rounded-full bg-white/10 text-xs text-white/80", children: (b.user?.name ?? "—").slice(0, 1).toUpperCase() }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { children: b.user?.name ?? "—" })] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { className: "py-3 px-4", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex justify-end gap-2", children: [sessionUser?.role !== "Admin" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { onClick: () => cancel(b.id), disabled: b.status === "Cancelled", className: "rounded-lg px-3 py-1.5 text-xs font-semibold text-white\\r\\n                                   bg-rose-600/90 hover:bg-rose-600 disabled:opacity-50 disabled:cursor-not-allowed", children: "Cancel" })), sessionUser?.role === "Admin" && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StatusMenu, { value: b.status, onChange: (next) => changeStatus(b.id, next), disabled: b.status === "Cancelled" }))] }) })] }, b.id))), total === 0 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tr", { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("td", { colSpan: 6, className: "py-10 px-4 text-center text-white/70", children: "No bookings yet." }) }))] })] }) }) }), total > PAGE_SIZE && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between border-t border-white/10 bg-emerald-950/40 px-3 sm:px-4 py-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "hidden sm:block text-xs text-white/60", children: ["Showing ", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-white/90", children: startIdx + 1 }), "\\u2013", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-white/90", children: endIdx }), " of", " ", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-white/90", children: total })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center justify-end gap-1.5", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { onClick: () => setPage((p) => Math.max(1, p - 1)), disabled: page === 1, className: "rounded-lg border border-white/15 bg-white/5 px-3 py-1.5 text-xs text-white/90 hover:bg-white/10 disabled:opacity-40", "aria-label": "Previous page", children: "\\u2039 Prev" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "hidden xs:flex items-center gap-1", children: Array.from({ length: totalPages }, (_, i) => i + 1)\n                                            .slice(Math.max(0, Math.min(page - 3, totalPages - 5)), Math.max(5, Math.min(totalPages, page + 2)))\n                                            .map((p) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { onClick: () => setPage(p), className: `h-8 w-8 rounded-md text-xs font-medium ${p === page\n                                                ? "bg-emerald-500 text-emerald-950"\n                                                : "border border-white/15 bg-white/5 text-white/90 hover:bg-white/10"}`, "aria-current": p === page ? "page" : undefined, children: p }, p))) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "xs:hidden text-xs text-white/80", children: ["Page ", page, " / ", totalPages] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { onClick: () => setPage((p) => Math.min(totalPages, p + 1)), disabled: page === totalPages, className: "rounded-lg border border-white/15 bg-white/5 px-3 py-1.5 text-xs text-white/90 hover:bg-white/10 disabled:opacity-40", "aria-label": "Next page", children: "Next \\u203A" })] })] }))] })] }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BookingList);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQVMsa0NBQWtDLHVEQUFLLFdBQVc7QUFDNTBFLGtDQUFrQyw2Q0FBNkMsY0FBYyxzREFBSSxXQUFXLHFEQUFxRCxjQUFjLEdBQUcsR0FBRyxzREFBSSxTQUFTLGdEQUFnRCx1REFBSyxVQUFVLGlEQUFpRCxzREFBSSxVQUFVLHdKQUF3SixHQUFHLHNEQUFJLFdBQVcsK0JBQStCLElBQUksR0FBRyxHQUFHLHNEQUFJLFNBQVMsa0NBQWtDLHVEQUFLLFVBQVUsa0ZBQWtGLHNEQUFJLGFBQWEsa1JBQWtSLHNDQUFzQyxzREFBSSxlQUFlLG1HQUFtRyxLQUFLLEdBQUcsSUFBSSwyQkFBMkIsc0RBQUksU0FBUyxVQUFVLHNEQUFJLFNBQVMsNkZBQTZGLEdBQUcsS0FBSyxJQUFJLEdBQUcsR0FBRyx5QkFBeUIsdURBQUssVUFBVSx5SkFBeUosdURBQUssVUFBVSwyRUFBMkUsc0RBQUksV0FBVyxvREFBb0QsYUFBYSxzREFBSSxXQUFXLDhDQUE4QyxlQUFlLHNEQUFJLFdBQVcsNkNBQTZDLElBQUksR0FBRyx1REFBSyxVQUFVLCtEQUErRCxzREFBSSxhQUFhLG9RQUFvUSxHQUFHLHNEQUFJLFVBQVUsdUVBQXVFLG9CQUFvQjtBQUNydUU7QUFDQSx5REFBeUQsc0RBQUksYUFBYSxnRkFBZ0Y7QUFDMUo7QUFDQSxzSEFBc0gsaUVBQWlFLFFBQVEsR0FBRyx1REFBSyxVQUFVLDRGQUE0RixHQUFHLHNEQUFJLGFBQWEsa1JBQWtSLElBQUksSUFBSSxLQUFLLElBQUk7QUFDcG1CO0FBQ0EsaUVBQWUsV0FBVyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm9va2luZ0FwcC8uL3NyYy9ib29raW5nL0Jvb2tpbmdMaXN0LnRzeD9kNGU3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgY3JlYXRlUG9ydGFsIH0gZnJvbSBcInJlYWN0LWRvbVwiO1xuaW1wb3J0IHVzZVNlc3Npb24gZnJvbSBcIi4vdXNlU2Vzc2lvblwiO1xuaW1wb3J0IHsgY2FuY2VsQm9va2luZywgdXBkYXRlQm9va2luZ1N0YXR1cywgfSBmcm9tIFwiLi4vc3RvcmUvYm9va2luZ3NTbGljZVwiO1xuaW1wb3J0IHsgdXNlQXBwRGlzcGF0Y2ggfSBmcm9tIFwiLi4vc3RvcmUvaG9va3NcIjtcbmltcG9ydCB7IHVzZVNlbGVjdG9yIH0gZnJvbSBcInJlYWN0LXJlZHV4XCI7XG5jb25zdCBQQUdFX1NJWkUgPSA1O1xuY29uc3Qgc3RhdHVzQ2xhc3MgPSB7XG4gICAgQXBwcm92ZWQ6IFwiYmctZW1lcmFsZC01MDAvMTUgdGV4dC1lbWVyYWxkLTIwMCByaW5nLTEgcmluZy1lbWVyYWxkLTQwMC8yMFwiLFxuICAgIFBlbmRpbmc6IFwiYmctYW1iZXItNTAwLzE1IHRleHQtYW1iZXItMjAwIHJpbmctMSByaW5nLWFtYmVyLTQwMC8yMFwiLFxuICAgIENhbmNlbGxlZDogXCJiZy1yb3NlLTUwMC8xNSB0ZXh0LXJvc2UtMjAwIHJpbmctMSByaW5nLXJvc2UtNDAwLzIwXCIsXG4gICAgZGVmYXVsdDogXCJiZy13aGl0ZS8xMCB0ZXh0LXdoaXRlLzgwIHJpbmctMSByaW5nLXdoaXRlLzEwXCIsXG59O1xuLy8gaWNvbnNcbmNvbnN0IENoZWNrID0gKCkgPT4gKF9qc3goXCJzdmdcIiwgeyB2aWV3Qm94OiBcIjAgMCAyMCAyMFwiLCBjbGFzc05hbWU6IFwiaC00IHctNFwiLCBmaWxsOiBcImN1cnJlbnRDb2xvclwiLCBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBjaGlsZHJlbjogX2pzeChcInBhdGhcIiwgeyBkOiBcIk03LjUgMTMuNSA0LjUgMTAuNSAzIDEybDQuNSA0LjVMMTcgN2wtMS41LTEuNXpcIiB9KSB9KSk7XG5jb25zdCBDaGV2cm9uID0gKCkgPT4gKF9qc3goXCJzdmdcIiwgeyB2aWV3Qm94OiBcIjAgMCAyMCAyMFwiLCBjbGFzc05hbWU6IFwiaC00IHctNCBvcGFjaXR5LTgwXCIsIGZpbGw6IFwiY3VycmVudENvbG9yXCIsIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIGNoaWxkcmVuOiBfanN4KFwicGF0aFwiLCB7IGQ6IFwiTTUuOCA3LjUgMTAgMTEuN2w0LjItNC4yIDEuMyAxLjMtNS41IDUuNS01LjUtNS41elwiIH0pIH0pKTtcbi8qKiAtLS0tLS0tLS0tIFBvcnRhbCBoZWxwZXJzIC0tLS0tLS0tLS0gKi9cbmZ1bmN0aW9uIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoZm4sIGRlcHMpIHtcbiAgICBjb25zdCB1c2VMRSA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyBSZWFjdC51c2VMYXlvdXRFZmZlY3QgOiBSZWFjdC51c2VFZmZlY3Q7XG4gICAgdXNlTEUoZm4sIGRlcHMpO1xufVxuZnVuY3Rpb24gTWVudVBvcnRhbCh7IGNoaWxkcmVuIH0pIHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gY3JlYXRlUG9ydGFsKGNoaWxkcmVuLCBkb2N1bWVudC5ib2R5KTtcbn1cbi8qKiAtLS0tLS0tLS0tIFN0YXR1cyBkcm9wZG93biB3aXRoIHBvcnRhbCAtLS0tLS0tLS0tICovXG5jb25zdCBTdGF0dXNNZW51ID0gKHsgdmFsdWUsIG9uQ2hhbmdlLCBkaXNhYmxlZCB9KSA9PiB7XG4gICAgY29uc3QgW29wZW4sIHNldE9wZW5dID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFthY3RpdmVJZHgsIHNldEFjdGl2ZUlkeF0gPSBSZWFjdC51c2VTdGF0ZSgwKTtcbiAgICBjb25zdCBidG5SZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IFtcIlBlbmRpbmdcIiwgXCJBcHByb3ZlZFwiLCBcIkNhbmNlbGxlZFwiXTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzZXRBY3RpdmVJZHgoTWF0aC5tYXgoMCwgb3B0aW9ucy5maW5kSW5kZXgoKG8pID0+IG8gPT09IHZhbHVlKSkpO1xuICAgIH0sIFt2YWx1ZV0pO1xuICAgIC8vIGtleWJvYXJkIGludGVyYWN0aW9uc1xuICAgIGZ1bmN0aW9uIGhhbmRsZUtleShlKSB7XG4gICAgICAgIGlmICghb3Blbikge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIgfHwgZS5rZXkgPT09IFwiIFwiKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNldE9wZW4odHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICBzZXRPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgIGJ0blJlZi5jdXJyZW50Py5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmtleSA9PT0gXCJBcnJvd0Rvd25cIikge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc2V0QWN0aXZlSWR4KChpKSA9PiBNYXRoLm1pbihvcHRpb25zLmxlbmd0aCAtIDEsIGkgKyAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUua2V5ID09PSBcIkFycm93VXBcIikge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc2V0QWN0aXZlSWR4KChpKSA9PiBNYXRoLm1heCgwLCBpIC0gMSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCBzZWwgPSBvcHRpb25zW2FjdGl2ZUlkeF07XG4gICAgICAgICAgICBpZiAoc2VsICYmIHNlbCAhPT0gdmFsdWUpXG4gICAgICAgICAgICAgICAgb25DaGFuZ2Uoc2VsKTtcbiAgICAgICAgICAgIHNldE9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgYnRuUmVmLmN1cnJlbnQ/LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIChfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJyZWxhdGl2ZSBpbmxpbmUtYmxvY2sgdGV4dC1sZWZ0XCIsIG9uS2V5RG93bjogaGFuZGxlS2V5LCBjaGlsZHJlbjogW19qc3hzKFwiYnV0dG9uXCIsIHsgcmVmOiBidG5SZWYsIHR5cGU6IFwiYnV0dG9uXCIsIGRpc2FibGVkOiBkaXNhYmxlZCwgb25DbGljazogKCkgPT4gc2V0T3BlbigobykgPT4gIW8pLCBjbGFzc05hbWU6IFwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHJvdW5kZWQtbGcgcHgtMi41IHB5LTEuNSB0ZXh0LXhzIGZvbnQtc2VtaWJvbGRcXHJcXG4gICAgICAgICAgICAgICAgICAgYm9yZGVyIGJvcmRlci13aGl0ZS8xNSBiZy13aGl0ZS81IGhvdmVyOmJnLXdoaXRlLzEwIHRleHQtd2hpdGUvOTAgdHJhbnNpdGlvblxcclxcbiAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiLCBcImFyaWEtaGFzcG9wdXBcIjogXCJtZW51XCIsIFwiYXJpYS1leHBhbmRlZFwiOiBvcGVuLCBjaGlsZHJlbjogW19qc3hzKFwic3BhblwiLCB7IGNsYXNzTmFtZTogYGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiByb3VuZGVkLW1kIHB4LTIgcHktMC41IHJpbmctMSB0ZXh0LXhzIGZvbnQtbWVkaXVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAke3N0YXR1c0NsYXNzW3ZhbHVlXSA/PyBzdGF0dXNDbGFzcy5kZWZhdWx0fWAsIGNoaWxkcmVuOiBbX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiaC0xLjUgdy0xLjUgcm91bmRlZC1mdWxsIGJnLWN1cnJlbnQvODBcIiB9KSwgdmFsdWVdIH0pLCBfanN4KENoZXZyb24sIHt9KV0gfSksIG9wZW4gJiYgYnRuUmVmLmN1cnJlbnQgJiYgKF9qc3goQW5jaG9yZWRNZW51LCB7IGFuY2hvcjogYnRuUmVmLmN1cnJlbnQsIHZhbHVlOiB2YWx1ZSwgb3B0aW9uczogb3B0aW9ucywgYWN0aXZlSWR4OiBhY3RpdmVJZHgsIHNldEFjdGl2ZUlkeDogc2V0QWN0aXZlSWR4LCBvblNlbGVjdDogKG9wdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0ICE9PSB2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKG9wdCk7XG4gICAgICAgICAgICAgICAgICAgIHNldE9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0sIG9uQ2xvc2U6ICgpID0+IHNldE9wZW4oZmFsc2UpIH0pKV0gfSkpO1xufTtcbmZ1bmN0aW9uIEFuY2hvcmVkTWVudSh7IGFuY2hvciwgdmFsdWUsIG9wdGlvbnMsIGFjdGl2ZUlkeCwgc2V0QWN0aXZlSWR4LCBvblNlbGVjdCwgb25DbG9zZSwgfSkge1xuICAgIGNvbnN0IG1lbnVSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gICAgY29uc3QgW3Bvcywgc2V0UG9zXSA9IFJlYWN0LnVzZVN0YXRlKHtcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB3aWR0aDogMTc2LFxuICAgICAgICBvcGVuVXA6IGZhbHNlLFxuICAgIH0pO1xuICAgIC8vIHBsYWNlIG5lYXIgYW5jaG9yIChyaWdodC1hbGlnbmVkKSwgZmxpcCBpZiBuZWVkZWRcbiAgICBjb25zdCBwbGFjZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgY29uc3QgciA9IGFuY2hvci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3Qgd2lkdGggPSAxNzY7IC8vIHctNDRcbiAgICAgICAgY29uc3QgbWFyZ2luID0gODtcbiAgICAgICAgLy8gaW5pdGlhbCBvcGVuIGRvd253YXJkXG4gICAgICAgIGxldCB0b3AgPSByLmJvdHRvbSArIG1hcmdpbjtcbiAgICAgICAgbGV0IGxlZnQgPSByLnJpZ2h0IC0gd2lkdGg7XG4gICAgICAgIC8vIGNsYW1wIGxlZnQgd2l0aGluIHZpZXdwb3J0XG4gICAgICAgIGxlZnQgPSBNYXRoLm1heCg4LCBNYXRoLm1pbihsZWZ0LCB3aW5kb3cuaW5uZXJXaWR0aCAtIHdpZHRoIC0gOCkpO1xuICAgICAgICAvLyBpZiBub3QgZW5vdWdoIHNwYWNlIGJlbG93LCBmbGlwIHVwd2FyZCAoYWZ0ZXIgbWVhc3VyaW5nIG1lbnUgaGVpZ2h0KVxuICAgICAgICBsZXQgb3BlblVwID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IG1lbnVIID0gbWVudVJlZi5jdXJyZW50Py5vZmZzZXRIZWlnaHQgPz8gMDtcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCAtIHIuYm90dG9tIDwgKG1lbnVIIHx8IDE2MCkgKyBtYXJnaW4pIHtcbiAgICAgICAgICAgIG9wZW5VcCA9IHRydWU7XG4gICAgICAgICAgICB0b3AgPSByLnRvcCAtIG1hcmdpbiAtIChtZW51SCB8fCAxNjApO1xuICAgICAgICB9XG4gICAgICAgIHNldFBvcyh7IHRvcCwgbGVmdCwgd2lkdGgsIG9wZW5VcCB9KTtcbiAgICB9LCBbYW5jaG9yXSk7XG4gICAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHBsYWNlKCk7XG4gICAgfSwgW3BsYWNlXSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3Qgb25Eb2NDbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAobWVudVJlZi5jdXJyZW50Py5jb250YWlucyh0KSB8fCBhbmNob3IuY29udGFpbnModCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgb25DbG9zZSgpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvbktleSA9IChlKSA9PiBlLmtleSA9PT0gXCJFc2NhcGVcIiAmJiBvbkNsb3NlKCk7XG4gICAgICAgIGNvbnN0IG9uU2Nyb2xsID0gKCkgPT4gcGxhY2UoKTtcbiAgICAgICAgY29uc3Qgb25SZXNpemUgPSAoKSA9PiBwbGFjZSgpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG9uRG9jQ2xpY2spO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbktleSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIG9uU2Nyb2xsLCB0cnVlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgb25SZXNpemUpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBvbkRvY0NsaWNrKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIG9uS2V5KTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIG9uU2Nyb2xsLCB0cnVlKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIG9uUmVzaXplKTtcbiAgICAgICAgfTtcbiAgICB9LCBbYW5jaG9yLCBvbkNsb3NlLCBwbGFjZV0pO1xuICAgIHJldHVybiAoX2pzeChNZW51UG9ydGFsLCB7IGNoaWxkcmVuOiBfanN4KFwiZGl2XCIsIHsgcmVmOiBtZW51UmVmLCBjbGFzc05hbWU6IFwiZml4ZWQgei01MCBvdmVyZmxvdy1oaWRkZW4gcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLXdoaXRlLzEwIGJnLWVtZXJhbGQtOTUwLzk1IHNoYWRvdy0yeGwgYmFja2Ryb3AtYmx1clwiLCBzdHlsZTogeyB0b3A6IHBvcy50b3AsIGxlZnQ6IHBvcy5sZWZ0LCB3aWR0aDogcG9zLndpZHRoIH0sIG9uQ2xpY2s6IChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpLCBjaGlsZHJlbjogb3B0aW9ucy5tYXAoKG9wdCwgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBpZHggPT09IGFjdGl2ZUlkeDtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gb3B0ID09PSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKFwiYnV0dG9uXCIsIHsgcm9sZTogXCJtZW51aXRlbVwiLCBjbGFzc05hbWU6IGBmbGV4IHctZnVsbCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGdhcC0yIHB4LTMgcHktMiB0ZXh0LXhzIHRleHQtd2hpdGUvOTAgJHtpc0FjdGl2ZSA/IFwiYmctd2hpdGUvMTBcIiA6IFwiaG92ZXI6Ymctd2hpdGUvMTBcIn1gLCBvbk1vdXNlRW50ZXI6ICgpID0+IHNldEFjdGl2ZUlkeChpZHgpLCBvbkNsaWNrOiAoKSA9PiBvblNlbGVjdChvcHQpLCBjaGlsZHJlbjogW19qc3goXCJzcGFuXCIsIHsgY2hpbGRyZW46IG9wdCB9KSwgaXNTZWxlY3RlZCAmJiAoX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwidGV4dC1lbWVyYWxkLTMwMFwiLCBjaGlsZHJlbjogX2pzeChDaGVjaywge30pIH0pKV0gfSwgb3B0KSk7XG4gICAgICAgICAgICB9KSB9KSB9KSk7XG59XG4vKiogLS0tLS0tLS0tLSBCb29raW5nIGxpc3QgLS0tLS0tLS0tLSAqL1xuY29uc3QgQm9va2luZ0xpc3QgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2Vzc2lvblVzZXIgPSB1c2VTZXNzaW9uKCk7XG4gICAgY29uc3QgZGlzcGF0Y2ggPSB1c2VBcHBEaXNwYXRjaCgpO1xuICAgIGNvbnN0IGFsbCA9IHVzZVNlbGVjdG9yKChzKSA9PiBzLmJvb2tpbmdzPy5hbGwgPz8gW10pO1xuICAgIC8vIGNvbnN0IHJvd3MgPSB1c2VBcHBTZWxlY3RvcihzZWxlY3RWaXNpYmxlKTtcbiAgICBjb25zdCB1c2VyID0gdXNlU2Vzc2lvbigpO1xuICAgIGNvbnN0IHVzZXJCb29raW5ncyA9IHVzZVNlbGVjdG9yKChzKSA9PiBzLmJvb2tpbmdzPy5hbGwgPz8gW10pO1xuICAgIGNvbnN0IHJvd3MgPSB1c2VNZW1vKCgpID0+IHtcbiAgICAgICAgaWYgKCF1c2VyPy5lbWFpbClcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgaWYgKHVzZXIuZW1haWwgPT09IFwiYWRtaW5AZXhhbXBsZS5jb21cIikge1xuICAgICAgICAgICAgcmV0dXJuIHVzZXJCb29raW5ncztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlckJvb2tpbmdzLmZpbHRlcigoYikgPT4gYi51c2VyPy5lbWFpbCA9PT0gdXNlci5lbWFpbCk7XG4gICAgfSwgW3VzZXJCb29raW5ncywgdXNlcl0pO1xuICAgIGNvbnNvbGUubG9nKHsgcm93cyB9KTtcbiAgICBjb25zdCBjaGFuZ2VTdGF0dXMgPSAoaWQsIHN0YXR1cykgPT4gZGlzcGF0Y2godXBkYXRlQm9va2luZ1N0YXR1cyh7IGlkLCBzdGF0dXMgfSkpO1xuICAgIGNvbnN0IHZpc2libGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICAgICAgaWYgKCF1c2VyKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAvLyB0cmVhdCBlaXRoZXIgcm9sZSBvciBoYXJkY29kZWQgZW1haWwgYXMgYWRtaW5cbiAgICAgICAgY29uc3QgaXNBZG1pbiA9IHVzZXIucm9sZSA9PT0gXCJBZG1pblwiIHx8IHVzZXIuZW1haWwgPT09IFwiYWRtaW5AZXhhbXBsZS5jb21cIjtcbiAgICAgICAgaWYgKGlzQWRtaW4pXG4gICAgICAgICAgICByZXR1cm4gdXNlckJvb2tpbmdzO1xuICAgICAgICBjb25zdCBteUVtYWlsID0gKHVzZXIuZW1haWwgPz8gXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIHVzZXJCb29raW5ncy5maWx0ZXIoKGIpID0+IChiLnVzZXI/LmVtYWlsID8/IFwiXCIpLnRvTG93ZXJDYXNlKCkgPT09IG15RW1haWwpO1xuICAgIH0sIFt1c2VyQm9va2luZ3MsIHVzZXJdKTtcbiAgICAvLyBQYWdpbmF0aW9uXG4gICAgY29uc3QgW3BhZ2UsIHNldFBhZ2VdID0gdXNlU3RhdGUoMSk7XG4gICAgY29uc3QgdG90YWwgPSB2aXNpYmxlLmxlbmd0aDtcbiAgICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5tYXgoMSwgTWF0aC5jZWlsKHRvdGFsIC8gUEFHRV9TSVpFKSk7XG4gICAgY29uc3Qgc3RhcnRJZHggPSAocGFnZSAtIDEpICogUEFHRV9TSVpFO1xuICAgIGNvbnN0IGVuZElkeCA9IE1hdGgubWluKHN0YXJ0SWR4ICsgUEFHRV9TSVpFLCB0b3RhbCk7XG4gICAgY29uc3QgcGFnZURhdGEgPSB1c2VNZW1vKCgpID0+IHZpc2libGUuc2xpY2Uoc3RhcnRJZHgsIGVuZElkeCksIFt2aXNpYmxlLCBzdGFydElkeCwgZW5kSWR4XSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHsgaWYgKHBhZ2UgPiB0b3RhbFBhZ2VzKVxuICAgICAgICBzZXRQYWdlKDEpOyB9LCBbdG90YWxQYWdlcywgcGFnZV0pO1xuICAgIGNvbnN0IGNhbmNlbCA9IChpZCkgPT4gZGlzcGF0Y2goY2FuY2VsQm9va2luZyhpZCkpO1xuICAgIHJldHVybiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidy1mdWxsIHJvdW5kZWQtMnhsIHB5LTQgIFwiLCBjaGlsZHJlbjogW19qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm1iLTQgZmxleCBmbGV4LWNvbCBnYXAtMiBzbTpmbGV4LXJvdyBzbTppdGVtcy1jZW50ZXIgc206anVzdGlmeS1iZXR3ZWVuXCIsIGNoaWxkcmVuOiBbX2pzeChcImgyXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtbGcgc206dGV4dC14bCBmb250LXNlbWlib2xkIHRleHQtd2hpdGVcIiwgY2hpbGRyZW46IFwiWW91ciBCb29raW5nc1wiIH0pLCBfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXhzIHNtOnRleHQtc20gdGV4dC13aGl0ZS83MFwiLCBjaGlsZHJlbjogdG90YWwgPT09IDAgPyBcIjAgdG90YWxcIiA6IGAke3N0YXJ0SWR4ICsgMX0tJHtlbmRJZHh9IG9mICR7dG90YWx9YCB9KV0gfSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm92ZXJmbG93LWhpZGRlbiByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItd2hpdGUvMTBcIiwgY2hpbGRyZW46IFtfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInNtOmhpZGRlbiBkaXZpZGUteSBkaXZpZGUtd2hpdGUvMTBcIiwgY2hpbGRyZW46IHBhZ2VEYXRhLmxlbmd0aCA+IDAgPyAocGFnZURhdGEubWFwKChiKSA9PiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJwLTQgYmctYmxhY2svMTBcIiwgY2hpbGRyZW46IF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtc3RhcnQganVzdGlmeS1iZXR3ZWVuIGdhcC0zXCIsIGNoaWxkcmVuOiBbX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibWluLXctMFwiLCBjaGlsZHJlbjogW19qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidGV4dC1iYXNlIGZvbnQtbWVkaXVtIHRleHQtd2hpdGVcIiwgY2hpbGRyZW46IGIuZmFjaWxpdHkgfSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm10LTEgdGV4dC14cyB0ZXh0LXdoaXRlLzgwXCIsIGNoaWxkcmVuOiBbX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiaW5saW5lLWJsb2NrIG1yLTNcIiwgY2hpbGRyZW46IGIuZGF0ZSB9KSwgX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiaW5saW5lLWJsb2NrXCIsIGNoaWxkcmVuOiBiLnNsb3QgfSldIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJtdC0yIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRleHQtc21cIiwgY2hpbGRyZW46IFtfanN4cyhcInNwYW5cIiwgeyBjbGFzc05hbWU6IGBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcm91bmRlZC1sZyBweC0yIHB5LTAuNSB0ZXh0LXhzIGZvbnQtbWVkaXVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtzdGF0dXNDbGFzc1tiLnN0YXR1c10gPz8gc3RhdHVzQ2xhc3MuZGVmYXVsdH1gLCBjaGlsZHJlbjogW19qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImgtMS41IHctMS41IHJvdW5kZWQtZnVsbCBiZy1jdXJyZW50LzgwXCIgfSksIGIuc3RhdHVzXSB9KSwgX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwidGV4dC13aGl0ZS83MFwiLCBjaGlsZHJlbjogXCJcXHUyMDIyXCIgfSksIF9qc3hzKFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC13aGl0ZS85MFwiLCBjaGlsZHJlbjogW19qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImdyaWQgaC02IHctNiBwbGFjZS1pdGVtcy1jZW50ZXIgcm91bmRlZC1mdWxsIGJnLXdoaXRlLzEwIHRleHQtWzEwcHhdIHRleHQtd2hpdGUvODBcIiwgY2hpbGRyZW46IChiLnVzZXI/Lm5hbWUgPz8gXCLigJRcIikuc2xpY2UoMCwgMSkudG9VcHBlckNhc2UoKSB9KSwgYi51c2VyPy5uYW1lID8/IFwi4oCUXCJdIH0pXSB9KV0gfSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggc2hyaW5rLTAgZ2FwLTJcIiwgY2hpbGRyZW46IFtzZXNzaW9uVXNlcj8ucm9sZSAhPT0gXCJBZG1pblwiICYmIChfanN4KFwiYnV0dG9uXCIsIHsgb25DbGljazogKCkgPT4gY2FuY2VsKGIuaWQpLCBkaXNhYmxlZDogYi5zdGF0dXMgPT09IFwiQ2FuY2VsbGVkXCIsIGNsYXNzTmFtZTogXCJyb3VuZGVkLW1kIHB4LTMgcHktMS41IHRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LXdoaXRlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJnLXJvc2UtNjAwLzkwIGhvdmVyOmJnLXJvc2UtNjAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkXCIsIGNoaWxkcmVuOiBcIkNhbmNlbFwiIH0pKSwgc2Vzc2lvblVzZXI/LnJvbGUgPT09IFwiQWRtaW5cIiAmJiAoX2pzeChTdGF0dXNNZW51LCB7IHZhbHVlOiBiLnN0YXR1cywgb25DaGFuZ2U6IChuZXh0KSA9PiBjaGFuZ2VTdGF0dXMoYi5pZCwgbmV4dCksIGRpc2FibGVkOiBiLnN0YXR1cyA9PT0gXCJDYW5jZWxsZWRcIiB9KSldIH0pXSB9KSB9LCBiLmlkKSkpKSA6IChfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInB5LTEwIHB4LTQgdGV4dC1jZW50ZXIgdGV4dC13aGl0ZS83MFwiLCBjaGlsZHJlbjogXCJObyBib29raW5ncyB5ZXQuXCIgfSkpIH0pLCBfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImhpZGRlbiBzbTpibG9ja1wiLCBjaGlsZHJlbjogX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJvdmVyZmxvdy14LWF1dG9cIiwgY2hpbGRyZW46IF9qc3hzKFwidGFibGVcIiwgeyBjbGFzc05hbWU6IFwibWluLXctZnVsbCB0ZXh0LXNtXCIsIGNoaWxkcmVuOiBbX2pzeChcInRoZWFkXCIsIHsgY2xhc3NOYW1lOiBcInN0aWNreSB0b3AtMCB6LTEwIGJnLWVtZXJhbGQtOTAwLzYwIGJhY2tkcm9wLWJsdXIgdGV4dC1sZWZ0IHRleHQtd2hpdGUvODBcIiwgY2hpbGRyZW46IF9qc3hzKFwidHJcIiwgeyBjbGFzc05hbWU6IFwiWyY+dGhdOnB5LTMgWyY+dGhdOnB4LTRcIiwgY2hpbGRyZW46IFtfanN4KFwidGhcIiwgeyBjbGFzc05hbWU6IFwidy1bMjIlXVwiLCBjaGlsZHJlbjogXCJGYWNpbGl0eVwiIH0pLCBfanN4KFwidGhcIiwgeyBjbGFzc05hbWU6IFwidy1bMTYlXVwiLCBjaGlsZHJlbjogXCJEYXRlXCIgfSksIF9qc3goXCJ0aFwiLCB7IGNsYXNzTmFtZTogXCJ3LVsxNiVdXCIsIGNoaWxkcmVuOiBcIlNsb3RcIiB9KSwgX2pzeChcInRoXCIsIHsgY2xhc3NOYW1lOiBcInctWzE2JV1cIiwgY2hpbGRyZW46IFwiU3RhdHVzXCIgfSksIF9qc3goXCJ0aFwiLCB7IGNsYXNzTmFtZTogXCJ3LVsxOCVdXCIsIGNoaWxkcmVuOiBcIkJvb2tlZCBCeVwiIH0pLCBfanN4KFwidGhcIiwgeyBjbGFzc05hbWU6IFwidy1bMTIlXSB0ZXh0LXJpZ2h0XCIsIGNoaWxkcmVuOiBcIkFjdGlvbnNcIiB9KV0gfSkgfSksIF9qc3hzKFwidGJvZHlcIiwgeyBjbGFzc05hbWU6IFwiZGl2aWRlLXkgZGl2aWRlLXdoaXRlLzEwXCIsIGNoaWxkcmVuOiBbcGFnZURhdGEubWFwKChiKSA9PiAoX2pzeHMoXCJ0clwiLCB7IGNsYXNzTmFtZTogXCJhbGlnbi10b3AgdHJhbnNpdGlvbiBob3ZlcjpiZy13aGl0ZS81IGV2ZW46Ymctd2hpdGUvNS8zMFwiLCBjaGlsZHJlbjogW19qc3goXCJ0ZFwiLCB7IGNsYXNzTmFtZTogXCJweS0zIHB4LTQgdGV4dC13aGl0ZVwiLCBjaGlsZHJlbjogYi5mYWNpbGl0eSB9KSwgX2pzeChcInRkXCIsIHsgY2xhc3NOYW1lOiBcInB5LTMgcHgtNCB0ZXh0LXdoaXRlLzkwXCIsIGNoaWxkcmVuOiBiLmRhdGUgfSksIF9qc3goXCJ0ZFwiLCB7IGNsYXNzTmFtZTogXCJweS0zIHB4LTQgdGV4dC13aGl0ZS85MFwiLCBjaGlsZHJlbjogYi5zbG90IH0pLCBfanN4KFwidGRcIiwgeyBjbGFzc05hbWU6IFwicHktMyBweC00XCIsIGNoaWxkcmVuOiBfanN4cyhcInNwYW5cIiwgeyBjbGFzc05hbWU6IGBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcm91bmRlZC1sZyBweC0yLjUgcHktMSB0ZXh0LXhzIGZvbnQtbWVkaXVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtzdGF0dXNDbGFzc1tiLnN0YXR1c10gPz8gc3RhdHVzQ2xhc3MuZGVmYXVsdH1gLCBjaGlsZHJlbjogW19qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImgtMS41IHctMS41IHJvdW5kZWQtZnVsbCBiZy1jdXJyZW50LzgwXCIgfSksIGIuc3RhdHVzXSB9KSB9KSwgX2pzeChcInRkXCIsIHsgY2xhc3NOYW1lOiBcInB5LTMgcHgtNCB0ZXh0LXdoaXRlLzkwXCIsIGNoaWxkcmVuOiBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiLCBjaGlsZHJlbjogW19qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZ3JpZCBoLTcgdy03IHBsYWNlLWl0ZW1zLWNlbnRlciByb3VuZGVkLWZ1bGwgYmctd2hpdGUvMTAgdGV4dC14cyB0ZXh0LXdoaXRlLzgwXCIsIGNoaWxkcmVuOiAoYi51c2VyPy5uYW1lID8/IFwi4oCUXCIpLnNsaWNlKDAsIDEpLnRvVXBwZXJDYXNlKCkgfSksIF9qc3goXCJzcGFuXCIsIHsgY2hpbGRyZW46IGIudXNlcj8ubmFtZSA/PyBcIuKAlFwiIH0pXSB9KSB9KSwgX2pzeChcInRkXCIsIHsgY2xhc3NOYW1lOiBcInB5LTMgcHgtNFwiLCBjaGlsZHJlbjogX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmxleCBqdXN0aWZ5LWVuZCBnYXAtMlwiLCBjaGlsZHJlbjogW3Nlc3Npb25Vc2VyPy5yb2xlICE9PSBcIkFkbWluXCIgJiYgKF9qc3goXCJidXR0b25cIiwgeyBvbkNsaWNrOiAoKSA9PiBjYW5jZWwoYi5pZCksIGRpc2FibGVkOiBiLnN0YXR1cyA9PT0gXCJDYW5jZWxsZWRcIiwgY2xhc3NOYW1lOiBcInJvdW5kZWQtbGcgcHgtMyBweS0xLjUgdGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtd2hpdGVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJnLXJvc2UtNjAwLzkwIGhvdmVyOmJnLXJvc2UtNjAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkXCIsIGNoaWxkcmVuOiBcIkNhbmNlbFwiIH0pKSwgc2Vzc2lvblVzZXI/LnJvbGUgPT09IFwiQWRtaW5cIiAmJiAoX2pzeChTdGF0dXNNZW51LCB7IHZhbHVlOiBiLnN0YXR1cywgb25DaGFuZ2U6IChuZXh0KSA9PiBjaGFuZ2VTdGF0dXMoYi5pZCwgbmV4dCksIGRpc2FibGVkOiBiLnN0YXR1cyA9PT0gXCJDYW5jZWxsZWRcIiB9KSldIH0pIH0pXSB9LCBiLmlkKSkpLCB0b3RhbCA9PT0gMCAmJiAoX2pzeChcInRyXCIsIHsgY2hpbGRyZW46IF9qc3goXCJ0ZFwiLCB7IGNvbFNwYW46IDYsIGNsYXNzTmFtZTogXCJweS0xMCBweC00IHRleHQtY2VudGVyIHRleHQtd2hpdGUvNzBcIiwgY2hpbGRyZW46IFwiTm8gYm9va2luZ3MgeWV0LlwiIH0pIH0pKV0gfSldIH0pIH0pIH0pLCB0b3RhbCA+IFBBR0VfU0laRSAmJiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmxleCBmbGV4LWNvbCBnYXAtMyBzbTpmbGV4LXJvdyBzbTppdGVtcy1jZW50ZXIgc206anVzdGlmeS1iZXR3ZWVuIGJvcmRlci10IGJvcmRlci13aGl0ZS8xMCBiZy1lbWVyYWxkLTk1MC80MCBweC0zIHNtOnB4LTQgcHktM1wiLCBjaGlsZHJlbjogW19qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImhpZGRlbiBzbTpibG9jayB0ZXh0LXhzIHRleHQtd2hpdGUvNjBcIiwgY2hpbGRyZW46IFtcIlNob3dpbmcgXCIsIF9qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtd2hpdGUvOTBcIiwgY2hpbGRyZW46IHN0YXJ0SWR4ICsgMSB9KSwgXCJcXHUyMDEzXCIsIF9qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtd2hpdGUvOTBcIiwgY2hpbGRyZW46IGVuZElkeCB9KSwgXCIgb2ZcIiwgXCIgXCIsIF9qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtd2hpdGUvOTBcIiwgY2hpbGRyZW46IHRvdGFsIH0pXSB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1lbmQgZ2FwLTEuNVwiLCBjaGlsZHJlbjogW19qc3goXCJidXR0b25cIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRQYWdlKChwKSA9PiBNYXRoLm1heCgxLCBwIC0gMSkpLCBkaXNhYmxlZDogcGFnZSA9PT0gMSwgY2xhc3NOYW1lOiBcInJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci13aGl0ZS8xNSBiZy13aGl0ZS81IHB4LTMgcHktMS41IHRleHQteHMgdGV4dC13aGl0ZS85MCBob3ZlcjpiZy13aGl0ZS8xMCBkaXNhYmxlZDpvcGFjaXR5LTQwXCIsIFwiYXJpYS1sYWJlbFwiOiBcIlByZXZpb3VzIHBhZ2VcIiwgY2hpbGRyZW46IFwiXFx1MjAzOSBQcmV2XCIgfSksIF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiaGlkZGVuIHhzOmZsZXggaXRlbXMtY2VudGVyIGdhcC0xXCIsIGNoaWxkcmVuOiBBcnJheS5mcm9tKHsgbGVuZ3RoOiB0b3RhbFBhZ2VzIH0sIChfLCBpKSA9PiBpICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKE1hdGgubWF4KDAsIE1hdGgubWluKHBhZ2UgLSAzLCB0b3RhbFBhZ2VzIC0gNSkpLCBNYXRoLm1heCg1LCBNYXRoLm1pbih0b3RhbFBhZ2VzLCBwYWdlICsgMikpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChwKSA9PiAoX2pzeChcImJ1dHRvblwiLCB7IG9uQ2xpY2s6ICgpID0+IHNldFBhZ2UocCksIGNsYXNzTmFtZTogYGgtOCB3LTggcm91bmRlZC1tZCB0ZXh0LXhzIGZvbnQtbWVkaXVtICR7cCA9PT0gcGFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJnLWVtZXJhbGQtNTAwIHRleHQtZW1lcmFsZC05NTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImJvcmRlciBib3JkZXItd2hpdGUvMTUgYmctd2hpdGUvNSB0ZXh0LXdoaXRlLzkwIGhvdmVyOmJnLXdoaXRlLzEwXCJ9YCwgXCJhcmlhLWN1cnJlbnRcIjogcCA9PT0gcGFnZSA/IFwicGFnZVwiIDogdW5kZWZpbmVkLCBjaGlsZHJlbjogcCB9LCBwKSkpIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ4czpoaWRkZW4gdGV4dC14cyB0ZXh0LXdoaXRlLzgwXCIsIGNoaWxkcmVuOiBbXCJQYWdlIFwiLCBwYWdlLCBcIiAvIFwiLCB0b3RhbFBhZ2VzXSB9KSwgX2pzeChcImJ1dHRvblwiLCB7IG9uQ2xpY2s6ICgpID0+IHNldFBhZ2UoKHApID0+IE1hdGgubWluKHRvdGFsUGFnZXMsIHAgKyAxKSksIGRpc2FibGVkOiBwYWdlID09PSB0b3RhbFBhZ2VzLCBjbGFzc05hbWU6IFwicm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLXdoaXRlLzE1IGJnLXdoaXRlLzUgcHgtMyBweS0xLjUgdGV4dC14cyB0ZXh0LXdoaXRlLzkwIGhvdmVyOmJnLXdoaXRlLzEwIGRpc2FibGVkOm9wYWNpdHktNDBcIiwgXCJhcmlhLWxhYmVsXCI6IFwiTmV4dCBwYWdlXCIsIGNoaWxkcmVuOiBcIk5leHQgXFx1MjAzQVwiIH0pXSB9KV0gfSkpXSB9KV0gfSkpO1xufTtcbmV4cG9ydCBkZWZhdWx0IEJvb2tpbmdMaXN0O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///541\n\n}')},848:(module,__unused_webpack_exports,__webpack_require__)=>{eval("{\n\nif (true) {\n  module.exports = __webpack_require__(20);\n} else // removed by dead control flow\n{}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODQ4LmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQUksSUFBcUM7QUFDekMsRUFBRSx3Q0FBcUU7QUFDdkUsRUFBRSxLQUFLO0FBQUEsRUFFTiIsInNvdXJjZXMiOlsid2VicGFjazovL2Jvb2tpbmdBcHAvLi9ub2RlX21vZHVsZXMvcmVhY3QvanN4LXJ1bnRpbWUuanM/OWNhNSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtanN4LXJ1bnRpbWUucHJvZHVjdGlvbi5taW4uanMnKTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtanN4LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanMnKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///848\n\n}")},860:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addBooking: () => (/* binding */ addBooking),\n/* harmony export */   bookingsReducer: () => (/* binding */ bookingsReducer),\n/* harmony export */   cancelBooking: () => (/* binding */ cancelBooking),\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   makeSelectVisibleBookings: () => (/* binding */ makeSelectVisibleBookings),\n/* harmony export */   selectAllBookings: () => (/* binding */ selectAllBookings),\n/* harmony export */   selectBookingsCount: () => (/* binding */ selectBookingsCount),\n/* harmony export */   updateBookingStatus: () => (/* binding */ updateBookingStatus)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(468);\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__);\n\nconst seed = [];\nconst initialState = { all: seed };\nconst bookingsSlice = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createSlice)({\n    name: "bookings",\n    initialState,\n    reducers: {\n        addBooking: (state, action) => {\n            state.all.unshift(action.payload);\n        },\n        cancelBooking: (state, action) => {\n            const booking = state.all.find((b) => b.id === action.payload);\n            if (booking)\n                booking.status = "Cancelled";\n        },\n        updateBookingStatus: (state, action) => {\n            const booking = state.all.find((b) => b.id === action.payload.id);\n            if (booking)\n                booking.status = action.payload.status;\n        },\n    }\n});\nconst { addBooking, cancelBooking, updateBookingStatus } = bookingsSlice.actions;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (bookingsSlice.reducer);\nconst bookingsReducer = bookingsSlice.reducer;\n// Selectors\nconst selectAllBookings = (s) => s.bookings.all;\nconst makeSelectVisibleBookings = (user) => {\n    return (s) => {\n        const rows = s.bookings.all;\n        if (!user)\n            return rows;\n        return user.role === "Admin" ? rows : rows.filter(r => r.user?.id === user.id);\n    };\n};\nconst selectBookingsCount = (s) => s.bookings.all.length;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODYwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBK0M7QUFDL0M7QUFDQSx1QkFBdUI7QUFDdkIsc0JBQXNCLDZEQUFXO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxDQUFDO0FBQ00sUUFBUSxpREFBaUQ7QUFDaEUsaUVBQWUscUJBQXFCLEVBQUM7QUFDOUI7QUFDUDtBQUNPO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm9va2luZ0FwcC8uL3NyYy9zdG9yZS9ib29raW5nc1NsaWNlLnRzPzZmOGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlU2xpY2UgfSBmcm9tIFwiQHJlZHV4anMvdG9vbGtpdFwiO1xuY29uc3Qgc2VlZCA9IFtdO1xuY29uc3QgaW5pdGlhbFN0YXRlID0geyBhbGw6IHNlZWQgfTtcbmNvbnN0IGJvb2tpbmdzU2xpY2UgPSBjcmVhdGVTbGljZSh7XG4gICAgbmFtZTogXCJib29raW5nc1wiLFxuICAgIGluaXRpYWxTdGF0ZSxcbiAgICByZWR1Y2Vyczoge1xuICAgICAgICBhZGRCb29raW5nOiAoc3RhdGUsIGFjdGlvbikgPT4ge1xuICAgICAgICAgICAgc3RhdGUuYWxsLnVuc2hpZnQoYWN0aW9uLnBheWxvYWQpO1xuICAgICAgICB9LFxuICAgICAgICBjYW5jZWxCb29raW5nOiAoc3RhdGUsIGFjdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgYm9va2luZyA9IHN0YXRlLmFsbC5maW5kKChiKSA9PiBiLmlkID09PSBhY3Rpb24ucGF5bG9hZCk7XG4gICAgICAgICAgICBpZiAoYm9va2luZylcbiAgICAgICAgICAgICAgICBib29raW5nLnN0YXR1cyA9IFwiQ2FuY2VsbGVkXCI7XG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZUJvb2tpbmdTdGF0dXM6IChzdGF0ZSwgYWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBib29raW5nID0gc3RhdGUuYWxsLmZpbmQoKGIpID0+IGIuaWQgPT09IGFjdGlvbi5wYXlsb2FkLmlkKTtcbiAgICAgICAgICAgIGlmIChib29raW5nKVxuICAgICAgICAgICAgICAgIGJvb2tpbmcuc3RhdHVzID0gYWN0aW9uLnBheWxvYWQuc3RhdHVzO1xuICAgICAgICB9LFxuICAgIH1cbn0pO1xuZXhwb3J0IGNvbnN0IHsgYWRkQm9va2luZywgY2FuY2VsQm9va2luZywgdXBkYXRlQm9va2luZ1N0YXR1cyB9ID0gYm9va2luZ3NTbGljZS5hY3Rpb25zO1xuZXhwb3J0IGRlZmF1bHQgYm9va2luZ3NTbGljZS5yZWR1Y2VyO1xuZXhwb3J0IGNvbnN0IGJvb2tpbmdzUmVkdWNlciA9IGJvb2tpbmdzU2xpY2UucmVkdWNlcjtcbi8vIFNlbGVjdG9yc1xuZXhwb3J0IGNvbnN0IHNlbGVjdEFsbEJvb2tpbmdzID0gKHMpID0+IHMuYm9va2luZ3MuYWxsO1xuZXhwb3J0IGNvbnN0IG1ha2VTZWxlY3RWaXNpYmxlQm9va2luZ3MgPSAodXNlcikgPT4ge1xuICAgIHJldHVybiAocykgPT4ge1xuICAgICAgICBjb25zdCByb3dzID0gcy5ib29raW5ncy5hbGw7XG4gICAgICAgIGlmICghdXNlcilcbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICByZXR1cm4gdXNlci5yb2xlID09PSBcIkFkbWluXCIgPyByb3dzIDogcm93cy5maWx0ZXIociA9PiByLnVzZXI/LmlkID09PSB1c2VyLmlkKTtcbiAgICB9O1xufTtcbmV4cG9ydCBjb25zdCBzZWxlY3RCb29raW5nc0NvdW50ID0gKHMpID0+IHMuYm9va2luZ3MuYWxsLmxlbmd0aDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///860\n\n}')}}]);